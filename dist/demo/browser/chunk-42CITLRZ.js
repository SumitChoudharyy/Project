import{a as we}from"./chunk-CBANTME2.js";import{a as Ee,b as Re}from"./chunk-ECULAPZN.js";import{a as re,c as me,k as ye}from"./chunk-Q22QTCMB.js";import{a as ge,b as _e,c as ue,d as fe,e as xe,f as he,g as ve,h as Ce,i as be,j as Me,k as Se}from"./chunk-3C5Q2D26.js";import{a as Y}from"./chunk-I5TKW2RA.js";import"./chunk-BUWOPGRZ.js";import{a as le,c as se,d as ce}from"./chunk-WTICSYYS.js";import"./chunk-QWIYH2MJ.js";import{c as ne,d as ae}from"./chunk-GFDPKATK.js";import{L as Z,M as ee,O as te,S as ie,T as oe,b as j,d as S,f as H,g as G,j as U,k as W,l as J,m as K,p as Q,r as X}from"./chunk-O5SXCTPO.js";import"./chunk-NYMOSDCU.js";import{a as Ie}from"./chunk-RDV23JZH.js";import{a as Pe}from"./chunk-LH5HPNDD.js";import"./chunk-TWAJJYLZ.js";import{a as de,b as pe}from"./chunk-I2VQT6RE.js";import{$a as x,Aa as E,Fa as I,Ka as d,S as y,Wa as c,Xa as i,Xb as k,Ya as t,Yb as T,Za as b,_a as f,bb as R,cc as D,db as u,ea as v,eb as _,ed as F,fa as C,g as P,jd as A,kd as $,ld as V,md as B,nd as L,oc as N,pd as q,qb as O,sb as o,tb as h,td as z,ub as M,wa as l}from"./chunk-ONERCYX6.js";function Oe(e,a){e&1&&(i(0,"div",13),b(1,"app-loading-spinner"),t())}function ke(e,a){e&1&&(i(0,"div",14)(1,"p"),o(2,"No rooms found. Add your first room to get started."),t()())}function Te(e,a){e&1&&(i(0,"th",29),o(1,"Room Number"),t())}function De(e,a){if(e&1&&(i(0,"td",30),o(1),t()),e&2){let r=a.$implicit;l(),h(r.roomNumber)}}function Ne(e,a){e&1&&(i(0,"th",29),o(1,"Room ID"),t())}function Fe(e,a){if(e&1&&(i(0,"td",30),o(1),t()),e&2){let r=a.$implicit;l(),h(r.id)}}function Ae(e,a){e&1&&(i(0,"th",29),o(1,"Category"),t())}function $e(e,a){if(e&1&&(i(0,"td",30),o(1),t()),e&2){let r=a.$implicit;l(),h(r.category)}}function Ve(e,a){e&1&&(i(0,"th",29),o(1,"Price/Night"),t())}function Be(e,a){if(e&1&&(i(0,"td",30),o(1),t()),e&2){let r=a.$implicit;l(),h(r.pricePerNight)}}function Le(e,a){e&1&&(i(0,"th",29),o(1,"Capacity"),t())}function qe(e,a){if(e&1&&(i(0,"td",30),o(1),t()),e&2){let r=a.$implicit;l(),M("",r.capacity," guests")}}function ze(e,a){e&1&&(i(0,"th",29),o(1,"Status"),t())}function je(e,a){if(e&1&&(i(0,"td",30)(1,"span",31),o(2),t()()),e&2){let r=a.$implicit;l(),O("available",r.available)("occupied",!r.available),l(),M(" ",r.available?"Available":"Occupied"," ")}}function He(e,a){e&1&&(i(0,"th",29),o(1,"Amenities"),t())}function Ge(e,a){if(e&1&&(i(0,"mat-chip",35),o(1),t()),e&2){let r=a.$implicit;l(),M(" ",r," ")}}function Ue(e,a){if(e&1&&(i(0,"span",36),o(1),t()),e&2){let r=_().$implicit;l(),M(" +",r.amenities.length-3," more ")}}function We(e,a){if(e&1&&(i(0,"td",30)(1,"div",32),d(2,Ge,2,1,"mat-chip",33)(3,Ue,2,1,"span",34),t()()),e&2){let r=a.$implicit;l(2),c("ngForOf",r.amenities.slice(0,3)),l(),c("ngIf",r.amenities.length>3)}}function Je(e,a){e&1&&(i(0,"th",29),o(1,"Actions"),t())}function Ke(e,a){if(e&1){let r=R();i(0,"td",30)(1,"button",37),u("click",function(){let s=v(r).$implicit,m=_(2);return C(m.editRoom(s))}),i(2,"mat-icon"),o(3,"edit"),t()(),i(4,"button",38),u("click",function(){let s=v(r).$implicit,m=_(2);return C(m.deleteRoom(s))}),i(5,"mat-icon"),o(6,"delete"),t()()()}}function Qe(e,a){e&1&&b(0,"tr",39)}function Xe(e,a){e&1&&b(0,"tr",40)}function Ye(e,a){if(e&1&&(i(0,"div",15)(1,"table",16),f(2,17),d(3,Te,2,0,"th",18)(4,De,2,1,"td",19),x(),f(5,20),d(6,Ne,2,0,"th",18)(7,Fe,2,1,"td",19),x(),f(8,21),d(9,Ae,2,0,"th",18)(10,$e,2,1,"td",19),x(),f(11,22),d(12,Ve,2,0,"th",18)(13,Be,2,1,"td",19),x(),f(14,23),d(15,Le,2,0,"th",18)(16,qe,2,1,"td",19),x(),f(17,24),d(18,ze,2,0,"th",18)(19,je,3,5,"td",19),x(),f(20,25),d(21,He,2,0,"th",18)(22,We,4,2,"td",19),x(),f(23,26),d(24,Je,2,0,"th",18)(25,Ke,7,0,"td",19),x(),d(26,Qe,1,0,"tr",27)(27,Xe,1,0,"tr",28),t()()),e&2){let r=_();l(),c("dataSource",r.rooms),l(25),c("matHeaderRowDef",r.displayedColumns),l(),c("matRowDefColumns",r.displayedColumns)}}function Ze(e,a){e&1&&(i(0,"mat-error"),o(1," Room number is required "),t())}function et(e,a){e&1&&(i(0,"mat-error"),o(1," Category is required "),t())}function tt(e,a){e&1&&(i(0,"mat-error"),o(1," Price is required "),t())}function it(e,a){e&1&&(i(0,"mat-error"),o(1," Price must be positive "),t())}function ot(e,a){e&1&&(i(0,"mat-error"),o(1," Capacity is required "),t())}function nt(e,a){e&1&&(i(0,"mat-error"),o(1," Capacity must be at least 1 "),t())}function at(e,a){if(e&1){let r=R();i(0,"mat-checkbox",68),u("change",function(s){let m=v(r).$implicit,p=_(2);return C(p.onAmenityChange(s,m))}),o(1),t()}if(e&2){let r=a.$implicit,n=_(2);c("value",r)("checked",n.selectedAmenities.includes(r)),l(),M(" ",r," ")}}function rt(e,a){if(e&1&&(i(0,"span"),o(1),t()),e&2){let r=_(2);l(),M("",r.isEditing?"Update":"Add"," Room")}}function mt(e,a){e&1&&b(0,"mat-spinner",69)}function lt(e,a){if(e&1){let r=R();i(0,"div",41)(1,"div",42),u("click",function(){v(r);let s=_();return C(s.closeDialog())}),t(),i(2,"div",43)(3,"div",44)(4,"h2"),o(5),t(),i(6,"button",45),u("click",function(){v(r);let s=_();return C(s.closeDialog())}),i(7,"mat-icon"),o(8,"close"),t()()(),i(9,"form",46),u("ngSubmit",function(){v(r);let s=_();return C(s.onSubmit())}),i(10,"div",47)(11,"mat-form-field",48)(12,"mat-label"),o(13,"Room Number"),t(),b(14,"input",49),d(15,Ze,2,0,"mat-error",50),t(),i(16,"mat-form-field",48)(17,"mat-label"),o(18,"Category"),t(),i(19,"mat-select",51)(20,"mat-option",52),o(21,"Standard"),t(),i(22,"mat-option",53),o(23,"Deluxe"),t(),i(24,"mat-option",54),o(25,"Suite"),t(),i(26,"mat-option",55),o(27,"Executive"),t(),i(28,"mat-option",56),o(29,"Presidential"),t()(),d(30,et,2,0,"mat-error",50),t()(),i(31,"div",47)(32,"mat-form-field",48)(33,"mat-label"),o(34,"Price per Night"),t(),b(35,"input",57),i(36,"span",58),o(37,"$"),t(),d(38,tt,2,0,"mat-error",50)(39,it,2,0,"mat-error",50),t(),i(40,"mat-form-field",48)(41,"mat-label"),o(42,"Capacity"),t(),b(43,"input",59),d(44,ot,2,0,"mat-error",50)(45,nt,2,0,"mat-error",50),t()(),i(46,"div",47)(47,"mat-checkbox",60),o(48," Room is available "),t()(),i(49,"div",61)(50,"h4"),o(51,"Amenities"),t(),i(52,"div",62),d(53,at,2,3,"mat-checkbox",63),t()(),i(54,"div",64)(55,"button",65),u("click",function(){v(r);let s=_();return C(s.closeDialog())}),o(56,"Cancel"),t(),i(57,"button",66),d(58,rt,2,1,"span",50)(59,mt,1,0,"mat-spinner",67),t()()()()()}if(e&2){let r,n,s,m,p,w,g=_();l(5),h(g.isEditing?"Edit Room":"Add New Room"),l(4),c("formGroup",g.roomForm),l(6),c("ngIf",(r=g.roomForm.get("roomNumber"))==null?null:r.hasError("required")),l(15),c("ngIf",(n=g.roomForm.get("category"))==null?null:n.hasError("required")),l(8),c("ngIf",(s=g.roomForm.get("pricePerNight"))==null?null:s.hasError("required")),l(),c("ngIf",(m=g.roomForm.get("pricePerNight"))==null?null:m.hasError("min")),l(5),c("ngIf",(p=g.roomForm.get("capacity"))==null?null:p.hasError("required")),l(),c("ngIf",(w=g.roomForm.get("capacity"))==null?null:w.hasError("min")),l(8),c("ngForOf",g.availableAmenities),l(4),c("disabled",g.roomForm.invalid||g.isSubmitting),l(),c("ngIf",!g.isSubmitting),l(),c("ngIf",g.isSubmitting)}}var qt=(()=>{let a=class a{constructor(n,s,m,p){this.roomService=n,this.fb=s,this.snackBar=m,this.popupService=p,this.rooms=[],this.isLoading=!1,this.roomStats={total:0,available:0,occupied:0},this.showDialog=!1,this.isEditing=!1,this.editingRoomId=null,this.isSubmitting=!1,this.selectedAmenities=[],this.availableAmenities=["WiFi","AC","TV","Mini Bar","Balcony","Jacuzzi","Room Service","Work Desk","Safe","Coffee Maker","Living Area","Kitchen","Ocean View","Mountain View"],this.displayedColumns=["roomNumber","roomId","category","price","capacity","status","amenities","actions"],this.destroy$=new P,this.roomForm=this.fb.group({roomNumber:["",S.required],category:["Standard",S.required],pricePerNight:[0,[S.required,S.min(.01)]],capacity:[1,[S.required,S.min(1)]],available:[!0]})}ngOnInit(){this.loadRooms()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadRooms(){this.isLoading=!0,console.log("Loading rooms from API..."),this.roomService.getAllRooms().pipe(y(this.destroy$)).subscribe({next:n=>{console.log("Rooms loaded successfully:",n.length,"rooms"),this.rooms=n,this.loadRoomStats(),this.isLoading=!1},error:n=>{console.error("Error loading rooms:",n);let s="An unexpected error occurred";typeof n=="string"?s=n:n?.message&&(s=n.message),this.snackBar.open(`Failed to load rooms: ${s}`,"Close",{duration:5e3}),this.isLoading=!1}})}loadRoomStats(){this.roomService.getRoomStats().pipe(y(this.destroy$)).subscribe({next:n=>{this.roomStats=n},error:n=>{console.error("Error loading room stats:",n)}})}openAddRoomDialog(){this.isEditing=!1,this.editingRoomId=null,this.selectedAmenities=[],this.roomForm.reset({roomNumber:"",category:"Standard",pricePerNight:0,capacity:1,available:!0}),this.showDialog=!0}editRoom(n){this.isEditing=!0,this.editingRoomId=n.id,this.selectedAmenities=[...n.amenities],this.roomForm.patchValue({roomNumber:n.roomNumber,category:n.category,pricePerNight:n.pricePerNight,capacity:n.capacity,available:n.available}),this.showDialog=!0}closeDialog(){this.showDialog=!1,this.roomForm.reset(),this.selectedAmenities=[]}onAmenityChange(n,s){if(n.checked)this.selectedAmenities.push(s);else{let m=this.selectedAmenities.indexOf(s);m>-1&&this.selectedAmenities.splice(m,1)}}onSubmit(){if(this.roomForm.valid){this.isSubmitting=!0;let n={roomNumber:this.roomForm.value.roomNumber,category:this.roomForm.value.category,pricePerNight:this.roomForm.value.pricePerNight,capacity:this.roomForm.value.capacity,available:this.roomForm.value.available,amenities:this.selectedAmenities};console.log("Submitting room data:",n),(this.isEditing?this.roomService.updateRoom(this.editingRoomId,n):this.roomService.addRoom(n)).pipe(y(this.destroy$)).subscribe({next:()=>{this.snackBar.open(`Room ${this.isEditing?"updated":"added"} successfully`,"Close",{duration:3e3}),this.closeDialog(),this.loadRooms()},error:m=>{console.error("Error saving room:",m);let p="An unexpected error occurred";typeof m=="string"?p=m:m?.message&&(p=m.message),this.snackBar.open(`Failed to ${this.isEditing?"update":"add"} room: ${p}`,"Close",{duration:5e3}),this.isSubmitting=!1}})}}deleteRoom(n){this.popupService.confirmDanger(`Are you sure you want to delete room ${n.roomNumber}?`,"Delete Room").subscribe(s=>{s&&(console.log("=== DELETE ROOM DEBUG INFO ==="),console.log("Room object:",n),console.log("Room ID (for API):",n.id),console.log("Room Number (display):",n.roomNumber),console.log("API endpoint will be:",`/api/rooms/delete/${n.id}`),console.log("================================"),this.roomService.deleteRoom(n.id).pipe(y(this.destroy$)).subscribe({next:()=>{this.snackBar.open("Room deleted successfully","Close",{duration:3e3}),this.loadRooms()},error:m=>{console.error("Error deleting room:",m);let p="An unexpected error occurred";typeof m=="string"?p=m:m?.message&&(p=m.message),this.snackBar.open(`Failed to delete room: ${p}`,"Close",{duration:5e3})}}))})}};a.\u0275fac=function(s){return new(s||a)(E(Ie),E(Q),E(Y),E(we))},a.\u0275cmp=I({type:a,selectors:[["app-manage-rooms"]],decls:41,vars:7,consts:[[1,"manage-rooms-container"],[1,"page-header"],[1,"rooms-overview"],[1,"stats-row"],[1,"stat-item"],[1,"actions-row"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"],[1,"rooms-table"],["class","loading-section",4,"ngIf"],["class","no-rooms",4,"ngIf"],["class","table-container",4,"ngIf"],["class","dialog-container",4,"ngIf"],[1,"loading-section"],[1,"no-rooms"],[1,"table-container"],["mat-table","",1,"rooms-table",3,"dataSource"],["matColumnDef","roomNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","roomId"],["matColumnDef","category"],["matColumnDef","price"],["matColumnDef","capacity"],["matColumnDef","status"],["matColumnDef","amenities"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"status-badge"],[1,"amenities-chips"],["class","amenity-chip",4,"ngFor","ngForOf"],["class","more-amenities",4,"ngIf"],[1,"amenity-chip"],[1,"more-amenities"],["mat-icon-button","","color","primary","matTooltip","Edit Room",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete Room",3,"click"],["mat-header-row",""],["mat-row",""],[1,"dialog-container"],[1,"dialog-overlay",3,"click"],[1,"dialog-content"],[1,"dialog-header"],["mat-icon-button","",3,"click"],[1,"room-form",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","formControlName","roomNumber","placeholder","e.g., 101"],[4,"ngIf"],["formControlName","category"],["value","Standard"],["value","Deluxe"],["value","Suite"],["value","Executive"],["value","Presidential"],["matInput","","type","number","formControlName","pricePerNight","placeholder","0.00"],["matPrefix",""],["matInput","","type","number","formControlName","capacity","placeholder","1"],["formControlName","available",1,"availability-checkbox"],[1,"form-section"],[1,"amenities-grid"],["class","amenity-checkbox",3,"value","checked","change",4,"ngFor","ngForOf"],[1,"dialog-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],[1,"amenity-checkbox",3,"change","value","checked"],["diameter","20"]],template:function(s,m){s&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Manage Rooms"),t(),i(4,"p"),o(5,"View and manage all hotel rooms"),t()(),i(6,"mat-card")(7,"mat-card-content")(8,"div",2)(9,"div",3)(10,"div",4)(11,"h3"),o(12),t(),i(13,"p"),o(14,"Total Rooms"),t()(),i(15,"div",4)(16,"h3"),o(17),t(),i(18,"p"),o(19,"Available"),t()(),i(20,"div",4)(21,"h3"),o(22),t(),i(23,"p"),o(24,"Occupied"),t()()(),i(25,"div",5)(26,"button",6),u("click",function(){return m.openAddRoomDialog()}),i(27,"mat-icon"),o(28,"add"),t(),o(29," Add New Room "),t(),i(30,"button",7),u("click",function(){return m.loadRooms()}),i(31,"mat-icon"),o(32,"refresh"),t(),o(33," Refresh "),t()()(),i(34,"div",8)(35,"h3"),o(36,"Room List"),t(),d(37,Oe,2,0,"div",9)(38,ke,3,0,"div",10)(39,Ye,28,3,"div",11),t()()()(),d(40,lt,60,12,"div",12)),s&2&&(l(12),h(m.roomStats.total),l(5),h(m.roomStats.available),l(5),h(m.roomStats.occupied),l(15),c("ngIf",m.isLoading),l(),c("ngIf",!m.isLoading&&m.rooms.length===0),l(),c("ngIf",!m.isLoading&&m.rooms.length>0),l(),c("ngIf",m.showDialog))},dependencies:[D,k,T,N,X,U,j,W,H,G,J,K,z,L,q,$,A,F,B,V,Se,ge,ue,ve,fe,_e,Ce,xe,he,be,Me,pe,de,ye,oe,ie,Z,ee,te,ae,ne,ce,se,le,Re,Ee,me,re,Pe],styles:[".manage-rooms-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:32px;font-weight:500}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}.rooms-overview[_ngcontent-%COMP%]{margin-bottom:24px}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin-bottom:24px}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:16px;background:#f5f5f5;border-radius:8px}.stat-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;color:#1976d2}.stat-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.actions-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px}.rooms-table[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:20px}.loading-section[_ngcontent-%COMP%]{padding:40px 0;text-align:center}.no-rooms[_ngcontent-%COMP%]{text-align:center;padding:40px 0;color:#666}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.rooms-table[_ngcontent-%COMP%]{width:100%;margin-top:16px}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.available[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32}.status-badge.occupied[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.amenities-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;align-items:center}.amenity-chip[_ngcontent-%COMP%]{font-size:11px;height:24px}.more-amenities[_ngcontent-%COMP%]{font-size:11px;color:#666;margin-left:4px}.dialog-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;display:flex;align-items:center;justify-content:center}.dialog-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080}.dialog-content[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:8px;padding:0;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 4px 20px #00000026}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 0;border-bottom:1px solid #e0e0e0;margin-bottom:24px}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500}.room-form[_ngcontent-%COMP%]{padding:0 24px 24px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.half-width[_ngcontent-%COMP%]{width:100%}.availability-checkbox[_ngcontent-%COMP%]{margin-bottom:16px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:500}.amenities-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.amenity-checkbox[_ngcontent-%COMP%]{display:block}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:24px;padding-top:24px;border-top:1px solid #e0e0e0}@media (max-width: 768px){.form-row[_ngcontent-%COMP%], .amenities-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dialog-content[_ngcontent-%COMP%]{width:95%;margin:20px}}"]});let e=a;return e})();export{qt as ManageRoomsComponent};
