import{a as ct}from"./chunk-RPNWSXSJ.js";import{b as pt,e as st}from"./chunk-HIVZESVJ.js";import"./chunk-FJOTTGA4.js";import{a as Z,b as tt,c as et,d as it,e as nt,f as at,g as ot,h as rt,i as mt,j as dt,k as lt}from"./chunk-WR3NAOOY.js";import{a as W}from"./chunk-DBSPY7YH.js";import{a as G,c as J,d as K}from"./chunk-DLOIIN3W.js";import"./chunk-TGZNMUSI.js";import"./chunk-OP2X5AS6.js";import"./chunk-WGAKZYIZ.js";import"./chunk-TWAJJYLZ.js";import{n as L,r as N}from"./chunk-SS6DKNIN.js";import{a as X,b as Y}from"./chunk-Z5A5ZMMP.js";import{$a as f,$b as k,Aa as C,Bb as x,Cb as h,Db as w,Fa as b,Ka as p,Wa as s,Xa as i,Xb as A,Ya as e,Yb as I,Za as v,_a as _,_b as T,ac as $,bb as D,bc as R,db as E,ea as M,eb as u,fa as S,id as H,jd as j,kc as B,kd as F,ld as U,md as V,nc as z,od as q,rb as y,sb as n,sd as Q,tb as g,ub as O,wa as m,zb as P}from"./chunk-WOJ2UDLT.js";function ft(t,a){t&1&&(i(0,"div",20),v(1,"mat-spinner"),e())}function gt(t,a){t&1&&(i(0,"div",21),n(1,"No complaints yet."),e())}function ut(t,a){t&1&&(i(0,"th",35),n(1,"ID"),e())}function xt(t,a){if(t&1&&(i(0,"td",36),n(1),e()),t&2){let r=a.$implicit;m(),g(r.complaintId)}}function Ct(t,a){t&1&&(i(0,"th",35),n(1,"Customer"),e())}function ht(t,a){if(t&1&&(i(0,"td",36),n(1),e()),t&2){let r=a.$implicit,o=u(2);m(),g(o.getUserName(r.customerId))}}function vt(t,a){t&1&&(i(0,"th",35),n(1,"Date"),e())}function Mt(t,a){if(t&1&&(i(0,"td",36),n(1),x(2,"date"),e()),t&2){let r=a.$implicit;m(),g(w(2,1,r.createdAt,"medium"))}}function St(t,a){t&1&&(i(0,"th",35),n(1,"Category"),e())}function bt(t,a){if(t&1&&(i(0,"td",36),n(1),x(2,"titlecase"),e()),t&2){let r=a.$implicit;m(),g(h(2,1,r.category))}}function Dt(t,a){t&1&&(i(0,"th",35),n(1,"Priority"),e())}function Et(t,a){if(t&1&&(i(0,"td",36)(1,"span"),n(2),x(3,"titlecase"),e()()),t&2){let r=a.$implicit;m(),y(P("chip priority ",r.priority)),m(),g(h(3,4,r.priority))}}function yt(t,a){t&1&&(i(0,"th",35),n(1,"Assigned"),e())}function Ot(t,a){if(t&1&&(i(0,"td",36),n(1),e()),t&2){let r=a.$implicit,o=u(2);m(),g(o.getAssignedName(r.assignedStaffId))}}function Pt(t,a){t&1&&(i(0,"th",35),n(1,"Status"),e())}function wt(t,a){if(t&1&&(i(0,"mat-option",39),n(1),x(2,"titlecase"),e()),t&2){let r=a.$implicit;s("value",r),m(),g(h(2,2,r))}}function At(t,a){if(t&1){let r=D();i(0,"td",36)(1,"mat-select",37),E("selectionChange",function(l){let d=M(r).$implicit,c=u(2);return S(c.onChangeStatus(d,l.value))}),p(2,wt,3,4,"mat-option",38),e()()}if(t&2){let r=a.$implicit,o=u(2);m(),s("value",r.status),m(),s("ngForOf",o.statusOptions)}}function It(t,a){t&1&&v(0,"tr",40)}function Tt(t,a){t&1&&v(0,"tr",41)}function kt(t,a){if(t&1&&(i(0,"div",22)(1,"table",23),_(2,24),p(3,ut,2,0,"th",25)(4,xt,2,1,"td",26),f(),_(5,27),p(6,Ct,2,0,"th",25)(7,ht,2,1,"td",26),f(),_(8,28),p(9,vt,2,0,"th",25)(10,Mt,3,4,"td",26),f(),_(11,29),p(12,St,2,0,"th",25)(13,bt,3,3,"td",26),f(),_(14,30),p(15,Dt,2,0,"th",25)(16,Et,4,6,"td",26),f(),_(17,31),p(18,yt,2,0,"th",25)(19,Ot,2,1,"td",26),f(),_(20,32),p(21,Pt,2,0,"th",25)(22,At,3,2,"td",26),f(),p(23,It,1,0,"tr",33)(24,Tt,1,0,"tr",34),e()()),t&2){let r=u();m(),s("dataSource",r.complaints),m(22),s("matHeaderRowDef",r.displayedColumns),m(),s("matRowDefColumns",r.displayedColumns)}}var ne=(()=>{let a=class a{constructor(o,l,d,c){this.store=o,this.complaintService=l,this.mockData=d,this.snackBar=c,this.complaints=[],this.isLoadingComplaints=!0,this.displayedColumns=["complaintId","customer","date","category","priority","assigned","status"],this.statusOptions=Object.values(pt),this.userMap={},this.user$=this.store.select(N)}ngOnInit(){this.mockData.getUsers().forEach(o=>{this.userMap[o.id]=`${o.firstName} ${o.lastName}`}),this.loadComplaints()}loadComplaints(){this.isLoadingComplaints=!0,this.complaintService.getAllComplaints().subscribe(o=>{this.complaints=o.sort((l,d)=>new Date(d.createdAt).getTime()-new Date(l.createdAt).getTime()),this.isLoadingComplaints=!1})}getUserName(o){return this.userMap[o]||o}getAssignedName(o){return o?this.userMap[o]||o:"\u2014"}onChangeStatus(o,l){o.status!==l&&this.complaintService.updateStatus(o.complaintId,l).subscribe({next:d=>{let c=this.complaints.findIndex(_t=>_t.complaintId===d.complaintId);c!==-1&&(this.complaints[c]=d),this.snackBar.open(`Status for #${d.complaintId} set to ${d.status}`,"Close",{duration:2500})},error:()=>this.snackBar.open("Failed to update status","Close",{duration:3e3})})}};a.\u0275fac=function(l){return new(l||a)(C(L),C(ct),C(st),C(W))},a.\u0275cmp=b({type:a,selectors:[["app-admin-dashboard"]],decls:74,vars:6,consts:[[1,"admin-dashboard-container"],[1,"page-header"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-content"],[1,"stat-icon"],["color","primary"],[1,"stat-details"],["color","accent"],["color","warn"],[2,"color","#4caf50"],[1,"quick-actions"],[1,"actions-grid"],["mat-raised-button","","color","primary","routerLink","/admin/rooms"],["mat-raised-button","","color","accent","routerLink","/admin/reservations"],["mat-raised-button","","color","warn","routerLink","/admin/customers"],[1,"complaints-section"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-wrapper",4,"ngIf"],[1,"loading"],[1,"empty-state"],[1,"table-wrapper"],["mat-table","",1,"mat-elevation-z1",3,"dataSource"],["matColumnDef","complaintId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customer"],["matColumnDef","date"],["matColumnDef","category"],["matColumnDef","priority"],["matColumnDef","assigned"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"status-select",3,"selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(l,d){if(l&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Admin Dashboard"),e(),i(4,"p"),n(5),x(6,"async"),e()(),i(7,"div",2)(8,"mat-card",3)(9,"mat-card-content")(10,"div",4)(11,"div",5)(12,"mat-icon",6),n(13,"hotel"),e()(),i(14,"div",7)(15,"h3"),n(16,"25"),e(),i(17,"p"),n(18,"Total Rooms"),e()()()()(),i(19,"mat-card",3)(20,"mat-card-content")(21,"div",4)(22,"div",5)(23,"mat-icon",8),n(24,"event"),e()(),i(25,"div",7)(26,"h3"),n(27,"12"),e(),i(28,"p"),n(29,"Active Bookings"),e()()()()(),i(30,"mat-card",3)(31,"mat-card-content")(32,"div",4)(33,"div",5)(34,"mat-icon",9),n(35,"people"),e()(),i(36,"div",7)(37,"h3"),n(38,"8"),e(),i(39,"p"),n(40,"Total Customers"),e()()()()(),i(41,"mat-card",3)(42,"mat-card-content")(43,"div",4)(44,"div",5)(45,"mat-icon",10),n(46,"attach_money"),e()(),i(47,"div",7)(48,"h3"),n(49,"$15,420"),e(),i(50,"p"),n(51,"Revenue"),e()()()()()(),i(52,"div",11)(53,"h2"),n(54,"Quick Actions"),e(),i(55,"div",12)(56,"button",13)(57,"mat-icon"),n(58,"hotel"),e(),n(59," Manage Rooms "),e(),i(60,"button",14)(61,"mat-icon"),n(62,"event"),e(),n(63," View Reservations "),e(),i(64,"button",15)(65,"mat-icon"),n(66,"people"),e(),n(67," Manage Customers "),e()()(),i(68,"div",16)(69,"h2"),n(70,"All Complaints"),e(),p(71,ft,2,0,"div",17)(72,gt,2,0,"div",18)(73,kt,25,3,"div",19),e()()),l&2){let c;m(5),O("Welcome back, ",(c=h(6,4,d.user$))==null?null:c.firstName,"!"),m(66),s("ngIf",d.isLoadingComplaints),m(),s("ngIf",!d.isLoadingComplaints&&d.complaints.length===0),m(),s("ngIf",!d.isLoadingComplaints&&d.complaints.length>0)}},dependencies:[R,A,I,T,k,$,z,B,Q,V,q,j,H,U,F,lt,Z,et,ot,it,tt,rt,nt,at,mt,dt,Y,X,K,J,G],styles:[".admin-dashboard-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:32px;font-weight:500}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{padding:24px}.stat-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.stat-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:28px;font-weight:500}.stat-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.quick-actions[_ngcontent-%COMP%]{margin-top:32px}.quick-actions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 16px;font-size:24px;font-weight:400}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.actions-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;height:auto}@media (max-width: 768px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:16px}.stats-grid[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.complaints-section[_ngcontent-%COMP%]{margin-top:32px}.table-wrapper[_ngcontent-%COMP%]{overflow:auto}table[_ngcontent-%COMP%]{width:100%}.loading[_ngcontent-%COMP%]{padding:24px 0;display:flex;justify-content:center}.empty-state[_ngcontent-%COMP%]{color:#666;padding:16px 0}.chip.priority.low[_ngcontent-%COMP%]{background:#f1f8e9;color:#558b2f;padding:2px 8px;border-radius:12px;font-size:12px}.chip.priority.medium[_ngcontent-%COMP%]{background:#fff8e1;color:#f9a825;padding:2px 8px;border-radius:12px;font-size:12px}.chip.priority.high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:2px 8px;border-radius:12px;font-size:12px}.chip.priority.urgent[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:2px 8px;border-radius:12px;font-size:12px;border:1px solid #c62828}.status-select[_ngcontent-%COMP%]{min-width:150px}"]});let t=a;return t})();export{ne as AdminDashboardComponent};
