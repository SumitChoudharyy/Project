import{a as Bt}from"./chunk-EMNM7JTF.js";import{a as b,b as Tt}from"./chunk-FJOTTGA4.js";import{a as mt,c as ct,f as Pt,k as It}from"./chunk-WFEU5DWJ.js";import{a as Mt,b as xt,c as St,d as kt,e as bt,f as Dt,g as yt,h as Et,i as wt,j as Rt,k as Ot}from"./chunk-WR3NAOOY.js";import{a as it}from"./chunk-DBSPY7YH.js";import{a as ut,b as _t,c as vt,d as Ct,e as ht}from"./chunk-46DETFXS.js";import"./chunk-VZ6OGXNG.js";import{a as pt,c as dt,d as ft}from"./chunk-DLOIIN3W.js";import"./chunk-TGZNMUSI.js";import{c as lt,d as st}from"./chunk-O4ARMABX.js";import{K as nt,O as at,R as ot,S as rt,b as J,f as Q,g as W,j as X,l as Y,m as Z,o as tt,q as et}from"./chunk-OP2X5AS6.js";import"./chunk-WGAKZYIZ.js";import{a as Nt}from"./chunk-FY7GSPO4.js";import"./chunk-LMRVVMVD.js";import{a as Ft}from"./chunk-BKTIJ4YH.js";import"./chunk-TWAJJYLZ.js";import{b as gt}from"./chunk-Z5A5ZMMP.js";import{$a as f,$b as N,Aa as x,Bb as M,Cb as y,Db as O,Fa as I,Ka as p,S as E,Wa as c,Wb as T,Xa as i,Xb as B,Ya as e,Yb as F,Za as S,_a as d,ac as $,bb as w,bc as V,db as h,dd as A,ea as v,eb as D,fa as C,g as P,id as j,jd as H,kd as z,ld as G,md as U,nc as L,ob as R,od as K,sb as n,sd as q,tb as g,ub as k,wa as l}from"./chunk-WOJ2UDLT.js";function $t(t,a){if(t&1&&(i(0,"mat-option",26),n(1),M(2,"titlecase"),e()),t&2){let r=a.$implicit;c("value",r),l(),k(" ",y(2,2,r)," ")}}function Vt(t,a){if(t&1&&(i(0,"mat-option",26),n(1),M(2,"titlecase"),e()),t&2){let r=a.$implicit;c("value",r),l(),k(" ",y(2,2,r)," ")}}function Lt(t,a){t&1&&(i(0,"div",27),S(1,"app-loading-spinner",28),e())}function At(t,a){t&1&&(i(0,"div",29)(1,"mat-icon"),n(2,"event_busy"),e(),i(3,"h3"),n(4,"No reservations found"),e(),i(5,"p"),n(6,"No reservations match your current filters"),e()())}function jt(t,a){t&1&&(i(0,"th",46),n(1,"Booking ID"),e())}function Ht(t,a){if(t&1&&(i(0,"td",47),n(1),e()),t&2){let r=a.$implicit;l(),g(r.id)}}function zt(t,a){t&1&&(i(0,"th",46),n(1,"Customer ID"),e())}function Gt(t,a){if(t&1&&(i(0,"td",47),n(1),e()),t&2){let r=a.$implicit;l(),g(r.customerId)}}function Ut(t,a){t&1&&(i(0,"th",46),n(1,"Room ID"),e())}function Kt(t,a){if(t&1&&(i(0,"td",47),n(1),e()),t&2){let r=a.$implicit;l(),g(r.roomId)}}function qt(t,a){t&1&&(i(0,"th",46),n(1,"Check-in"),e())}function Jt(t,a){if(t&1&&(i(0,"td",47),n(1),M(2,"date"),e()),t&2){let r=a.$implicit;l(),g(O(2,1,r.checkInDate,"shortDate"))}}function Qt(t,a){t&1&&(i(0,"th",46),n(1,"Check-out"),e())}function Wt(t,a){if(t&1&&(i(0,"td",47),n(1),M(2,"date"),e()),t&2){let r=a.$implicit;l(),g(O(2,1,r.checkOutDate,"shortDate"))}}function Xt(t,a){t&1&&(i(0,"th",46),n(1,"Guests"),e())}function Yt(t,a){if(t&1&&(i(0,"td",47),n(1),e()),t&2){let r=a.$implicit;l(),g(r.guests)}}function Zt(t,a){t&1&&(i(0,"th",46),n(1,"Status"),e())}function te(t,a){if(t&1&&(i(0,"td",47)(1,"mat-chip",48),n(2),M(3,"titlecase"),e()()),t&2){let r=a.$implicit;l(),c("ngClass","status-"+r.status),l(),k(" ",y(3,2,r.status)," ")}}function ee(t,a){t&1&&(i(0,"th",46),n(1,"Payment"),e())}function ie(t,a){if(t&1&&(i(0,"td",47)(1,"mat-chip",48),n(2),M(3,"titlecase"),e()()),t&2){let r=a.$implicit;l(),c("ngClass","payment-"+r.paymentStatus),l(),k(" ",y(3,2,r.paymentStatus)," ")}}function ne(t,a){t&1&&(i(0,"th",46),n(1,"Total"),e())}function ae(t,a){if(t&1&&(i(0,"td",47),n(1),e()),t&2){let r=a.$implicit;l(),k("$",r.totalAmount)}}function oe(t,a){t&1&&(i(0,"th",46),n(1,"Actions"),e())}function re(t,a){if(t&1){let r=w();i(0,"td",47)(1,"div",49)(2,"button",50),h("click",function(){let m=v(r).$implicit,o=D(2);return C(o.viewBookingDetails(m))}),i(3,"mat-icon"),n(4,"visibility"),e()(),i(5,"button",51),h("click",function(){let m=v(r).$implicit,o=D(2);return C(o.editBooking(m))}),i(6,"mat-icon"),n(7,"edit"),e()(),i(8,"button",52),h("click",function(){let m=v(r).$implicit,o=D(2);return C(o.cancelBooking(m))}),i(9,"mat-icon"),n(10,"cancel"),e()()()()}}function le(t,a){t&1&&S(0,"tr",53)}function se(t,a){t&1&&S(0,"tr",54)}function me(t,a){if(t&1&&(i(0,"div",30)(1,"table",31),d(2,32),p(3,jt,2,0,"th",33)(4,Ht,2,1,"td",34),f(),d(5,35),p(6,zt,2,0,"th",33)(7,Gt,2,1,"td",34),f(),d(8,36),p(9,Ut,2,0,"th",33)(10,Kt,2,1,"td",34),f(),d(11,37),p(12,qt,2,0,"th",33)(13,Jt,3,4,"td",34),f(),d(14,38),p(15,Qt,2,0,"th",33)(16,Wt,3,4,"td",34),f(),d(17,39),p(18,Xt,2,0,"th",33)(19,Yt,2,1,"td",34),f(),d(20,40),p(21,Zt,2,0,"th",33)(22,te,4,4,"td",34),f(),d(23,41),p(24,ee,2,0,"th",33)(25,ie,4,4,"td",34),f(),d(26,42),p(27,ne,2,0,"th",33)(28,ae,2,1,"td",34),f(),d(29,43),p(30,oe,2,0,"th",33)(31,re,11,0,"td",34),f(),p(32,le,1,0,"tr",44)(33,se,1,0,"tr",45),e()()),t&2){let r=D();l(),c("dataSource",r.filteredReservations),l(31),c("matHeaderRowDef",r.displayedColumns),l(),c("matRowDefColumns",r.displayedColumns)}}var Ge=(()=>{let a=class a{constructor(s,m,o,u,_){this.bookingService=s,this.fb=m,this.dialog=o,this.snackBar=u,this.popupService=_,this.allReservations=[],this.filteredReservations=[],this.isLoading=!1,this.displayedColumns=["id","customerId","roomId","checkInDate","checkOutDate","guests","status","paymentStatus","totalAmount","actions"],this.stats={active:0,pending:0,completed:0,cancelled:0},this.bookingStatuses=Object.values(b),this.paymentStatuses=Object.values(Tt),this.destroy$=new P,this.filterForm=this.fb.group({status:[""],paymentStatus:[""],startDate:[""],endDate:[""]})}ngOnInit(){this.loadReservations(),this.setupFilterListeners()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadReservations(){this.isLoading=!0,this.bookingService.getAllBookings().pipe(E(this.destroy$)).subscribe({next:s=>{this.allReservations=s,this.filteredReservations=s,this.updateStats(),this.isLoading=!1},error:s=>{console.error("Error loading reservations:",s),this.snackBar.open("Failed to load reservations","Close",{duration:3e3}),this.isLoading=!1}})}setupFilterListeners(){this.filterForm.valueChanges.pipe(E(this.destroy$)).subscribe(()=>{this.applyFilters()})}updateStats(){let s=new Date;this.stats.active=this.allReservations.filter(m=>new Date(m.checkInDate)<=s&&new Date(m.checkOutDate)>s&&m.status===b.CONFIRMED).length,this.stats.pending=this.allReservations.filter(m=>m.status===b.PENDING).length,this.stats.completed=this.allReservations.filter(m=>m.status===b.CHECKED_OUT).length,this.stats.cancelled=this.allReservations.filter(m=>m.status===b.CANCELLED).length}applyFilters(){let s=this.filterForm.value;this.filteredReservations=this.allReservations.filter(m=>{let o=!0;return s.status&&m.status!==s.status&&(o=!1),s.paymentStatus&&m.paymentStatus!==s.paymentStatus&&(o=!1),s.startDate&&new Date(m.checkInDate)<new Date(s.startDate)&&(o=!1),s.endDate&&new Date(m.checkOutDate)>new Date(s.endDate)&&(o=!1),o})}refreshReservations(){this.loadReservations()}openNewReservationDialog(){this.snackBar.open("New reservation functionality coming soon","Close",{duration:3e3})}viewBookingDetails(s){console.log("View booking details:",s)}editBooking(s){console.log("Edit booking:",s)}cancelBooking(s){this.popupService.confirmDanger(`Are you sure you want to cancel booking #${s.id}?`,"Cancel Booking").subscribe(m=>{m&&this.bookingService.cancelBooking(s.id,"Cancelled by admin").pipe(E(this.destroy$)).subscribe({next:o=>{this.snackBar.open("Booking cancelled successfully","Close",{duration:3e3}),this.loadReservations()},error:o=>{console.error("Error cancelling booking:",o),this.snackBar.open("Failed to cancel booking","Close",{duration:3e3})}})})}};a.\u0275fac=function(m){return new(m||a)(x(Nt),x(tt),x(Pt),x(it),x(Bt))},a.\u0275cmp=I({type:a,selectors:[["app-manage-reservations"]],decls:76,vars:16,consts:[["startPicker",""],["endPicker",""],[1,"manage-reservations-container"],[1,"page-header"],[1,"reservations-overview"],[1,"stats-row"],[1,"stat-item"],[1,"actions-row"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click","disabled"],[1,"filters-section"],[1,"filter-form",3,"formGroup"],[1,"filter-row"],["appearance","outline",1,"filter-field"],["formControlName","status"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","paymentStatus"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","endDate",3,"matDatepicker"],["mat-raised-button","","color","accent",3,"click","disabled"],[1,"reservations-table"],["class","loading-section",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-container",4,"ngIf"],[3,"value"],[1,"loading-section"],["message","Loading reservations..."],[1,"empty-state"],[1,"table-container"],["mat-table","",1,"reservations-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customerId"],["matColumnDef","roomId"],["matColumnDef","checkInDate"],["matColumnDef","checkOutDate"],["matColumnDef","guests"],["matColumnDef","status"],["matColumnDef","paymentStatus"],["matColumnDef","totalAmount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"ngClass"],[1,"action-buttons"],["mat-icon-button","","color","primary","matTooltip","View Details",3,"click"],["mat-icon-button","","color","accent","matTooltip","Edit Booking",3,"click"],["mat-icon-button","","color","warn","matTooltip","Cancel Booking",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(m,o){if(m&1){let u=w();i(0,"div",2)(1,"div",3)(2,"h1"),n(3,"Manage Reservations"),e(),i(4,"p"),n(5,"View and manage all hotel reservations"),e()(),i(6,"mat-card")(7,"mat-card-content")(8,"div",4)(9,"div",5)(10,"div",6)(11,"h3"),n(12),e(),i(13,"p"),n(14,"Active Reservations"),e()(),i(15,"div",6)(16,"h3"),n(17),e(),i(18,"p"),n(19,"Pending"),e()(),i(20,"div",6)(21,"h3"),n(22),e(),i(23,"p"),n(24,"Completed"),e()(),i(25,"div",6)(26,"h3"),n(27),e(),i(28,"p"),n(29,"Cancelled"),e()()(),i(30,"div",7)(31,"button",8),h("click",function(){return v(u),C(o.openNewReservationDialog())}),i(32,"mat-icon"),n(33,"add"),e(),n(34," New Reservation "),e(),i(35,"button",9),h("click",function(){return v(u),C(o.refreshReservations())}),i(36,"mat-icon"),n(37,"refresh"),e(),n(38," Refresh "),e()(),i(39,"div",10)(40,"form",11)(41,"div",12)(42,"mat-form-field",13)(43,"mat-label"),n(44,"Status"),e(),i(45,"mat-select",14)(46,"mat-option",15),n(47,"All Statuses"),e(),p(48,$t,3,4,"mat-option",16),e()(),i(49,"mat-form-field",13)(50,"mat-label"),n(51,"Payment Status"),e(),i(52,"mat-select",17)(53,"mat-option",15),n(54,"All Payment Statuses"),e(),p(55,Vt,3,4,"mat-option",16),e()(),i(56,"mat-form-field",13)(57,"mat-label"),n(58,"Start Date"),e(),S(59,"input",18)(60,"mat-datepicker-toggle",19)(61,"mat-datepicker",null,0),e(),i(63,"mat-form-field",13)(64,"mat-label"),n(65,"End Date"),e(),S(66,"input",20)(67,"mat-datepicker-toggle",19)(68,"mat-datepicker",null,1),e(),i(70,"button",21),h("click",function(){return v(u),C(o.applyFilters())}),n(71," Apply Filters "),e()()()()(),i(72,"div",22),p(73,Lt,2,0,"div",23)(74,At,7,0,"div",24)(75,me,34,3,"div",25),e()()()()}if(m&2){let u=R(62),_=R(69);l(12),g(o.stats.active),l(5),g(o.stats.pending),l(5),g(o.stats.completed),l(5),g(o.stats.cancelled),l(8),c("disabled",o.isLoading),l(5),c("formGroup",o.filterForm),l(8),c("ngForOf",o.bookingStatuses),l(7),c("ngForOf",o.paymentStatuses),l(4),c("matDatepicker",u),l(),c("for",u),l(6),c("matDatepicker",_),l(),c("for",_),l(3),c("disabled",o.isLoading),l(3),c("ngIf",o.isLoading),l(),c("ngIf",!o.isLoading&&o.filteredReservations.length===0),l(),c("ngIf",!o.isLoading&&o.filteredReservations.length>0)}},dependencies:[V,T,B,F,N,$,L,q,U,K,H,j,A,G,z,Ot,Mt,St,yt,kt,xt,Et,bt,Dt,wt,Rt,gt,rt,ot,nt,at,st,lt,ft,dt,pt,Ct,ut,_t,vt,ht,ct,mt,It,et,X,J,Q,W,Y,Z,Ft],styles:[".manage-reservations-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:32px;font-weight:500}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}.reservations-overview[_ngcontent-%COMP%]{margin-bottom:24px}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin-bottom:24px}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:16px;background-color:#f5f5f5;border-radius:8px}.stat-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:24px;font-weight:500;color:#1976d2}.stat-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.actions-row[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:24px}.actions-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.filters-section[_ngcontent-%COMP%]{margin-bottom:24px;padding:16px;background-color:#f9f9f9;border-radius:8px}.filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;flex-wrap:wrap}.filter-field[_ngcontent-%COMP%]{flex:1;min-width:200px}.reservations-table[_ngcontent-%COMP%]{margin-top:24px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.reservations-table[_ngcontent-%COMP%]{width:100%}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.status-pending[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100}.status-confirmed[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}.status-checked_in[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0}.status-checked_out[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.status-cancelled[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.payment-pending[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100}.payment-paid[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}.payment-failed[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.loading-section[_ngcontent-%COMP%]{padding:40px 0;text-align:center}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:400}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}@media (max-width: 768px){.manage-reservations-container[_ngcontent-%COMP%]{padding:16px}.stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.actions-row[_ngcontent-%COMP%], .filter-row[_ngcontent-%COMP%]{flex-direction:column}.filter-field[_ngcontent-%COMP%]{min-width:100%}}"]});let t=a;return t})();export{Ge as ManageReservationsComponent};
