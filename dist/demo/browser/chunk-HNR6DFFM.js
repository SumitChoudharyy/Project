import{a as q,b as N,o as R}from"./chunk-G4W6O524.js";import"./chunk-ECULAPZN.js";import"./chunk-Q22QTCMB.js";import"./chunk-3C5Q2D26.js";import"./chunk-MT5SNCPC.js";import"./chunk-I5TKW2RA.js";import"./chunk-4UJYQXVS.js";import"./chunk-BUWOPGRZ.js";import"./chunk-WTICSYYS.js";import"./chunk-QWIYH2MJ.js";import"./chunk-GFDPKATK.js";import"./chunk-O5SXCTPO.js";import"./chunk-NYMOSDCU.js";import{b as j}from"./chunk-DVKRTVMU.js";import"./chunk-RDV23JZH.js";import{a as G}from"./chunk-LH5HPNDD.js";import"./chunk-FJOTTGA4.js";import"./chunk-TWAJJYLZ.js";import{n as T,r as H}from"./chunk-YXL3DSGN.js";import"./chunk-I2VQT6RE.js";import{$b as P,Aa as h,Bb as g,Cb as b,Db as v,Fa as M,Ka as _,Wa as m,Wb as E,Xa as e,Xb as w,Ya as t,Yb as O,Za as S,ac as I,bb as k,db as u,ea as x,eb as d,fa as f,jd as V,lc as D,ld as L,nd as $,pd as z,rd as F,sb as n,tb as C,ub as p,vb as B,wa as c}from"./chunk-ONERCYX6.js";function Y(a,l){a&1&&(e(0,"div",9),S(1,"app-loading-spinner",10),t())}function U(a,l){a&1&&(e(0,"div",11)(1,"mat-icon"),n(2,"event_busy"),t(),e(3,"h3"),n(4,"No upcoming bookings"),t(),e(5,"p"),n(6,"You don't have any upcoming reservations"),t(),e(7,"button",12),n(8,"Book a Room"),t()())}function J(a,l){if(a&1&&(e(0,"div",30)(1,"mat-icon"),n(2,"note"),t(),e(3,"div",24)(4,"strong"),n(5,"Special Requests"),t(),e(6,"span"),n(7),t()()()),a&2){let i=d().$implicit;c(7),C(i.specialRequests)}}function K(a,l){if(a&1){let i=k();e(0,"button",31),u("click",function(){x(i);let r=d().$implicit,s=d(2);return f(s.modifyBooking(r))}),e(1,"mat-icon"),n(2,"edit"),t(),n(3," Modify "),t()}}function Q(a,l){if(a&1){let i=k();e(0,"button",32),u("click",function(){x(i);let r=d().$implicit,s=d(2);return f(s.cancelBooking(r))}),e(1,"mat-icon"),n(2,"cancel"),t(),n(3," Cancel "),t()}}function W(a,l){if(a&1){let i=k();e(0,"mat-card",15)(1,"mat-card-content")(2,"div",16)(3,"div",17)(4,"h3"),n(5),t(),e(6,"span",18),n(7),g(8,"titlecase"),t()(),e(9,"div",19)(10,"span",20),n(11),t()()(),e(12,"div",21)(13,"div",22)(14,"div",23)(15,"mat-icon"),n(16,"event"),t(),e(17,"div",24)(18,"strong"),n(19,"Check-in"),t(),e(20,"span"),n(21),g(22,"date"),t()()(),e(23,"div",23)(24,"mat-icon"),n(25,"event"),t(),e(26,"div",24)(27,"strong"),n(28,"Check-out"),t(),e(29,"span"),n(30),g(31,"date"),t()()()(),e(32,"div",22)(33,"div",23)(34,"mat-icon"),n(35,"people"),t(),e(36,"div",24)(37,"strong"),n(38,"Guests"),t(),e(39,"span"),n(40),t()()(),e(41,"div",23)(42,"mat-icon"),n(43,"payment"),t(),e(44,"div",24)(45,"strong"),n(46,"Payment Status"),t(),e(47,"span",25),n(48),g(49,"titlecase"),t()()()(),_(50,J,8,1,"div",26),t()(),e(51,"mat-card-actions")(52,"button",27),u("click",function(){let r=x(i).$implicit,s=d(2);return f(s.downloadInvoice(r))}),e(53,"mat-icon"),n(54,"download"),t(),n(55," Invoice "),t(),_(56,K,4,0,"button",28)(57,Q,4,0,"button",29),t()()}if(a&2){let i=l.$implicit,o=d(2);c(5),p("Booking #",i.id),c(),m("ngClass","status-"+i.status),c(),p(" ",b(8,12,i.status)," "),c(4),p("$",i.totalAmount),c(10),C(v(22,14,i.checkInDate,"fullDate")),c(9),C(v(31,17,i.checkOutDate,"fullDate")),c(10),p("",i.guests," guest(s)"),c(7),m("ngClass","payment-"+i.paymentStatus),c(),p(" ",b(49,20,i.paymentStatus)," "),c(2),m("ngIf",i.specialRequests),c(6),m("ngIf",o.canModifyBooking(i)),c(),m("ngIf",o.canCancelBooking(i))}}function X(a,l){if(a&1&&(e(0,"div",13),_(1,W,58,22,"mat-card",14),t()),a&2){let i=d();c(),m("ngForOf",i.upcomingBookings)}}function Z(a,l){a&1&&(e(0,"div",9),S(1,"app-loading-spinner",33),t())}function tt(a,l){a&1&&(e(0,"div",11)(1,"mat-icon"),n(2,"history"),t(),e(3,"h3"),n(4,"No past bookings"),t(),e(5,"p"),n(6,"Your booking history will appear here"),t()())}function et(a,l){if(a&1){let i=k();e(0,"mat-card",35)(1,"mat-card-content")(2,"div",16)(3,"div",17)(4,"h3"),n(5),t(),e(6,"span",18),n(7),g(8,"titlecase"),t()(),e(9,"div",19)(10,"span",20),n(11),t()()(),e(12,"div",21)(13,"div",22)(14,"div",23)(15,"mat-icon"),n(16,"event"),t(),e(17,"div",24)(18,"strong"),n(19,"Stay Period"),t(),e(20,"span"),n(21),g(22,"date"),g(23,"date"),t()()(),e(24,"div",23)(25,"mat-icon"),n(26,"people"),t(),e(27,"div",24)(28,"strong"),n(29,"Guests"),t(),e(30,"span"),n(31),t()()()()()(),e(32,"mat-card-actions")(33,"button",27),u("click",function(){let r=x(i).$implicit,s=d(2);return f(s.downloadInvoice(r))}),e(34,"mat-icon"),n(35,"download"),t(),n(36," Invoice "),t(),e(37,"button",31),u("click",function(){let r=x(i).$implicit,s=d(2);return f(s.viewBookingDetails(r))}),e(38,"mat-icon"),n(39,"visibility"),t(),n(40," View Details "),t()()()}if(a&2){let i=l.$implicit;c(5),p("Booking #",i.id),c(),m("ngClass","status-"+i.status),c(),p(" ",b(8,7,i.status)," "),c(4),p("$",i.totalAmount),c(10),B("",v(22,9,i.checkInDate,"shortDate")," - ",v(23,12,i.checkOutDate,"shortDate")),c(10),p("",i.guests," guest(s)")}}function nt(a,l){if(a&1&&(e(0,"div",13),_(1,et,41,15,"mat-card",34),t()),a&2){let i=d();c(),m("ngForOf",i.pastBookings)}}var xt=(()=>{let l=class l{constructor(o,r){this.store=o,this.bookingService=r,this.allBookings=[],this.upcomingBookings=[],this.pastBookings=[],this.isLoading=!0,this.user$=this.store.select(H)}ngOnInit(){this.loadBookings()}loadBookings(){this.user$.subscribe(o=>{o&&this.bookingService.getBookingsByCustomer(o.id).subscribe(r=>{this.allBookings=r,this.categorizeBookings(),this.isLoading=!1})})}categorizeBookings(){let o=new Date;this.upcomingBookings=this.allBookings.filter(r=>new Date(r.checkInDate)>o&&r.status!=="cancelled"),this.pastBookings=this.allBookings.filter(r=>new Date(r.checkOutDate)<=o||r.status==="cancelled")}canModifyBooking(o){let r=new Date(o.checkInDate),s=new Date,y=r.getTime()-s.getTime();return Math.ceil(y/(1e3*60*60*24))>=2&&o.status==="confirmed"}canCancelBooking(o){let r=new Date(o.checkInDate),s=new Date,y=r.getTime()-s.getTime();return Math.ceil(y/(1e3*60*60*24))>=1&&o.status==="confirmed"}modifyBooking(o){console.log("Modify booking:",o)}cancelBooking(o){console.log("Cancel booking:",o)}downloadInvoice(o){this.bookingService.generateInvoice(o.id).subscribe(r=>{console.log("Generated invoice:",r)})}viewBookingDetails(o){console.log("View booking details:",o)}};l.\u0275fac=function(r){return new(r||l)(h(T),h(j))},l.\u0275cmp=M({type:l,selectors:[["app-booking-history"]],decls:17,vars:6,consts:[[1,"booking-history-container"],[1,"page-header"],[1,"bookings-tabs"],["label","Upcoming"],[1,"tab-content"],["class","loading-section",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","bookings-list",4,"ngIf"],["label","Past"],[1,"loading-section"],["message","Loading your bookings..."],[1,"empty-state"],["mat-raised-button","","color","primary","routerLink","/search"],[1,"bookings-list"],["class","booking-card",4,"ngFor","ngForOf"],[1,"booking-card"],[1,"booking-header"],[1,"booking-info"],[1,"status-chip",3,"ngClass"],[1,"booking-amount"],[1,"amount"],[1,"booking-details"],[1,"detail-row"],[1,"detail-item"],[1,"detail-content"],[1,"payment-status",3,"ngClass"],["class","special-requests",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-button","",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],[1,"special-requests"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["message","Loading your booking history..."],["class","booking-card past-booking",4,"ngFor","ngForOf"],[1,"booking-card","past-booking"]],template:function(r,s){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),n(3,"My Bookings"),t(),e(4,"p"),n(5,"Manage your past and upcoming reservations"),t()(),e(6,"mat-tab-group",2)(7,"mat-tab",3)(8,"div",4),_(9,Y,2,0,"div",5)(10,U,9,0,"div",6)(11,X,2,1,"div",7),t()(),e(12,"mat-tab",8)(13,"div",4),_(14,Z,2,0,"div",5)(15,tt,7,0,"div",6)(16,nt,2,1,"div",7),t()()()()),r&2&&(c(9),m("ngIf",s.isLoading),c(),m("ngIf",!s.isLoading&&s.upcomingBookings.length===0),c(),m("ngIf",!s.isLoading&&s.upcomingBookings.length>0),c(3),m("ngIf",s.isLoading),c(),m("ngIf",!s.isLoading&&s.pastBookings.length===0),c(),m("ngIf",!s.isLoading&&s.pastBookings.length>0))},dependencies:[R,E,w,O,D,V,L,$,F,z,q,N,P,I,G],styles:[".booking-history-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:24px}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:32px;font-weight:300;color:#333}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}.bookings-tabs[_ngcontent-%COMP%]{margin-bottom:24px}.tab-content[_ngcontent-%COMP%]{padding:24px 0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:400}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px}.bookings-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.booking-card[_ngcontent-%COMP%]{transition:transform .2s ease}.booking-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.past-booking[_ngcontent-%COMP%]{opacity:.8}.booking-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px}.booking-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:500;color:#333}.booking-amount[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1976d2}.booking-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.detail-row[_ngcontent-%COMP%]{display:flex;gap:32px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;flex:1}.detail-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666;margin-top:2px}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.detail-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}.special-requests[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;background:#f8f9fa;padding:12px;border-radius:8px}.payment-paid[_ngcontent-%COMP%]{color:#4caf50;font-weight:500}.payment-pending[_ngcontent-%COMP%]{color:#ff9800;font-weight:500}.payment-failed[_ngcontent-%COMP%]{color:#f44336;font-weight:500}.loading-section[_ngcontent-%COMP%]{padding:40px 0}@media (max-width: 768px){.booking-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.detail-item[_ngcontent-%COMP%]{gap:8px}}"]});let a=l;return a})();export{xt as BookingHistoryComponent};
