import{a as gt}from"./chunk-HQB4IDXH.js";import{b as _t,e as ft}from"./chunk-4THNHNHB.js";import{a as it,b as nt,c as at,d as ot,e as mt,f as dt,g as rt,h as pt,i as lt,j as st,k as ct}from"./chunk-23UXKCBS.js";import{a as K}from"./chunk-4BZ6RJX3.js";import{d as X,i as Y,j as Z}from"./chunk-BNHOC7Z2.js";import"./chunk-JTD7WKY6.js";import"./chunk-KQPGAEJR.js";import"./chunk-DX6TEFGM.js";import{b as ut}from"./chunk-DEC6UIXC.js";import"./chunk-LI7SUQZC.js";import"./chunk-FJOTTGA4.js";import"./chunk-TWAJJYLZ.js";import{n as j,r as F}from"./chunk-YI2S3FLE.js";import{a as tt,b as et}from"./chunk-G6WIV7NF.js";import{$a as s,$b as w,Ba as v,Cb as D,Eb as g,Fb as C,Ga as A,Gb as b,La as p,Xa as l,Ya as n,Za as i,_a as h,_b as I,ab as c,bc as B,cb as O,cc as $,dc as z,eb as T,ec as R,fa as y,fb as x,fc as L,ga as k,md as U,nd as V,oc as N,od as q,pd as G,qd as Q,rc as H,sb as S,sd as W,tb as a,ub as f,vb as E,wb as P,wd as J,xa as m}from"./chunk-MA7RV5JZ.js";function xt(t,e){t&1&&(n(0,"div",21),h(1,"mat-spinner"),i())}function ht(t,e){t&1&&(n(0,"div",22),a(1,"No bookings yet."),i())}function Ct(t,e){t&1&&(n(0,"th",37),a(1,"ID"),i())}function vt(t,e){if(t&1&&(n(0,"td",38),a(1),i()),t&2){let o=e.$implicit;m(),f(o.id)}}function bt(t,e){t&1&&(n(0,"th",37),a(1,"Customer"),i())}function St(t,e){if(t&1&&(n(0,"td",38),a(1),i()),t&2){let o=e.$implicit,d=x(2);m(),f(d.getUserName(o.customerId))}}function Dt(t,e){t&1&&(n(0,"th",37),a(1,"Room"),i())}function Mt(t,e){if(t&1&&(n(0,"td",38),a(1),i()),t&2){let o=e.$implicit;m(),f(o.roomId)}}function Et(t,e){t&1&&(n(0,"th",37),a(1,"Dates"),i())}function yt(t,e){if(t&1&&(n(0,"td",38),a(1),g(2,"date"),g(3,"date"),i()),t&2){let o=e.$implicit;m(),P(" ",b(2,2,o.checkInDate,"shortDate")," - ",b(3,5,o.checkOutDate,"shortDate")," ")}}function kt(t,e){t&1&&(n(0,"th",37),a(1,"Guests"),i())}function At(t,e){if(t&1&&(n(0,"td",38),a(1),i()),t&2){let o=e.$implicit;m(),f(o.guests)}}function Ot(t,e){t&1&&(n(0,"th",37),a(1,"Amount"),i())}function Tt(t,e){if(t&1&&(n(0,"td",38),a(1),g(2,"number"),i()),t&2){let o=e.$implicit;m(),E("$",b(2,1,o.totalAmount,"1.2-2"))}}function Pt(t,e){t&1&&(n(0,"th",37),a(1,"Status"),i())}function It(t,e){if(t&1&&(n(0,"td",38)(1,"span"),a(2),g(3,"titlecase"),i()()),t&2){let o=e.$implicit;m(),S(D("chip status ",o.status)),m(),f(C(3,4,o.status))}}function wt(t,e){t&1&&(n(0,"th",37),a(1,"Payment"),i())}function Bt(t,e){if(t&1&&(n(0,"td",38)(1,"span"),a(2),g(3,"titlecase"),i()()),t&2){let o=e.$implicit;m(),S(D("chip payment ",o.paymentStatus)),m(),f(C(3,4,o.paymentStatus))}}function $t(t,e){t&1&&h(0,"tr",39)}function zt(t,e){t&1&&h(0,"tr",40)}function Rt(t,e){if(t&1&&(n(0,"div",23)(1,"table",24),s(2,25),p(3,Ct,2,0,"th",26)(4,vt,2,1,"td",27),c(),s(5,28),p(6,bt,2,0,"th",26)(7,St,2,1,"td",27),c(),s(8,29),p(9,Dt,2,0,"th",26)(10,Mt,2,1,"td",27),c(),s(11,30),p(12,Et,2,0,"th",26)(13,yt,4,8,"td",27),c(),s(14,31),p(15,kt,2,0,"th",26)(16,At,2,1,"td",27),c(),s(17,32),p(18,Ot,2,0,"th",26)(19,Tt,3,4,"td",27),c(),s(20,33),p(21,Pt,2,0,"th",26)(22,It,4,6,"td",27),c(),s(23,34),p(24,wt,2,0,"th",26)(25,Bt,4,6,"td",27),c(),p(26,$t,1,0,"tr",35)(27,zt,1,0,"tr",36),i()()),t&2){let o=x();m(),l("dataSource",o.bookings),m(25),l("matHeaderRowDef",o.bookingDisplayedColumns),m(),l("matRowDefColumns",o.bookingDisplayedColumns)}}function Lt(t,e){t&1&&(n(0,"div",21),h(1,"mat-spinner"),i())}function Nt(t,e){t&1&&(n(0,"div",22),a(1,"No complaints yet."),i())}function Ht(t,e){t&1&&(n(0,"th",37),a(1,"ID"),i())}function jt(t,e){if(t&1&&(n(0,"td",38),a(1),i()),t&2){let o=e.$implicit;m(),f(o.complaintId)}}function Ft(t,e){t&1&&(n(0,"th",37),a(1,"Customer"),i())}function Ut(t,e){if(t&1&&(n(0,"td",38),a(1),i()),t&2){let o=e.$implicit,d=x(2);m(),f(d.getUserName(o.customerId))}}function Vt(t,e){t&1&&(n(0,"th",37),a(1,"Date"),i())}function qt(t,e){if(t&1&&(n(0,"td",38),a(1),g(2,"date"),i()),t&2){let o=e.$implicit;m(),f(b(2,1,o.createdAt,"medium"))}}function Gt(t,e){t&1&&(n(0,"th",37),a(1,"Category"),i())}function Qt(t,e){if(t&1&&(n(0,"td",38),a(1),g(2,"titlecase"),i()),t&2){let o=e.$implicit;m(),f(C(2,1,o.category))}}function Wt(t,e){t&1&&(n(0,"th",37),a(1,"Priority"),i())}function Jt(t,e){if(t&1&&(n(0,"td",38)(1,"span"),a(2),g(3,"titlecase"),i()()),t&2){let o=e.$implicit;m(),S(D("chip priority ",o.priority)),m(),f(C(3,4,o.priority))}}function Kt(t,e){t&1&&(n(0,"th",37),a(1,"Assigned"),i())}function Xt(t,e){if(t&1&&(n(0,"td",38),a(1),i()),t&2){let o=e.$implicit,d=x(2);m(),f(d.getAssignedName(o.assignedStaffId))}}function Yt(t,e){t&1&&(n(0,"th",37),a(1,"Status"),i())}function Zt(t,e){if(t&1&&(n(0,"mat-option",49),a(1),g(2,"titlecase"),i()),t&2){let o=e.$implicit;l("value",o),m(),f(C(2,2,o))}}function te(t,e){if(t&1){let o=O();n(0,"td",38)(1,"mat-select",47),T("selectionChange",function(_){let r=y(o).$implicit,u=x(2);return k(u.onChangeStatus(r,_.value))}),p(2,Zt,3,4,"mat-option",48),i()()}if(t&2){let o=e.$implicit,d=x(2);m(),l("value",o.status),m(),l("ngForOf",d.statusOptions)}}function ee(t,e){t&1&&h(0,"tr",39)}function ie(t,e){t&1&&h(0,"tr",40)}function ne(t,e){if(t&1&&(n(0,"div",23)(1,"table",24),s(2,41),p(3,Ht,2,0,"th",26)(4,jt,2,1,"td",27),c(),s(5,28),p(6,Ft,2,0,"th",26)(7,Ut,2,1,"td",27),c(),s(8,42),p(9,Vt,2,0,"th",26)(10,qt,3,4,"td",27),c(),s(11,43),p(12,Gt,2,0,"th",26)(13,Qt,3,3,"td",27),c(),s(14,44),p(15,Wt,2,0,"th",26)(16,Jt,4,6,"td",27),c(),s(17,45),p(18,Kt,2,0,"th",26)(19,Xt,2,1,"td",27),c(),s(20,46),p(21,Yt,2,0,"th",26)(22,te,3,2,"td",27),c(),p(23,ee,1,0,"tr",35)(24,ie,1,0,"tr",36),i()()),t&2){let o=x();m(),l("dataSource",o.complaints),m(22),l("matHeaderRowDef",o.displayedColumns),m(),l("matRowDefColumns",o.displayedColumns)}}var Ae=(()=>{let e=class e{constructor(d,_,r,u,M){this.store=d,this.complaintService=_,this.mockData=r,this.snackBar=u,this.bookingService=M,this.complaints=[],this.isLoadingComplaints=!0,this.displayedColumns=["complaintId","customer","date","category","priority","assigned","status"],this.statusOptions=Object.values(_t),this.bookings=[],this.isLoadingBookings=!0,this.bookingDisplayedColumns=["bookingId","customer","room","dates","guests","amount","bookingStatus","payment"],this.userMap={},this.user$=this.store.select(F)}ngOnInit(){this.mockData.getUsers().forEach(d=>{this.userMap[d.id]=`${d.firstName} ${d.lastName}`}),this.loadComplaints(),this.loadBookings()}loadComplaints(){this.isLoadingComplaints=!0,this.complaintService.getAllComplaints().subscribe(d=>{this.complaints=d.sort((_,r)=>new Date(r.createdAt).getTime()-new Date(_.createdAt).getTime()),this.isLoadingComplaints=!1})}loadBookings(){this.isLoadingBookings=!0,this.bookingService.getAllBookings().subscribe(d=>{this.bookings=d.sort((_,r)=>new Date(r.createdAt).getTime()-new Date(_.createdAt).getTime()),this.isLoadingBookings=!1})}getUserName(d){return this.userMap[d]||d}getAssignedName(d){return d?this.userMap[d]||d:"\u2014"}onChangeStatus(d,_){d.status!==_&&this.complaintService.updateStatus(d.complaintId,_).subscribe({next:r=>{let u=this.complaints.findIndex(M=>M.complaintId===r.complaintId);u!==-1&&(this.complaints[u]=r),this.snackBar.open(`Status for #${r.complaintId} set to ${r.status}`,"Close",{duration:2500})},error:()=>this.snackBar.open("Failed to update status","Close",{duration:3e3})})}};e.\u0275fac=function(_){return new(_||e)(v(j),v(gt),v(ft),v(K),v(ut))},e.\u0275cmp=A({type:e,selectors:[["app-admin-dashboard"]],decls:80,vars:9,consts:[[1,"admin-dashboard-container"],[1,"page-header"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-content"],[1,"stat-icon"],["color","primary"],[1,"stat-details"],["color","accent"],["color","warn"],[2,"color","#4caf50"],[1,"quick-actions"],[1,"actions-grid"],["mat-raised-button","","color","primary","routerLink","/admin/rooms"],["mat-raised-button","","color","accent","routerLink","/admin/reservations"],["mat-raised-button","","color","warn","routerLink","/admin/customers"],[1,"bookings-section"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-wrapper",4,"ngIf"],[1,"complaints-section"],[1,"loading"],[1,"empty-state"],[1,"table-wrapper"],["mat-table","",1,"mat-elevation-z1",3,"dataSource"],["matColumnDef","bookingId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customer"],["matColumnDef","room"],["matColumnDef","dates"],["matColumnDef","guests"],["matColumnDef","amount"],["matColumnDef","bookingStatus"],["matColumnDef","payment"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["matColumnDef","complaintId"],["matColumnDef","date"],["matColumnDef","category"],["matColumnDef","priority"],["matColumnDef","assigned"],["matColumnDef","status"],[1,"status-select",3,"selectionChange","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(_,r){if(_&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Admin Dashboard"),i(),n(4,"p"),a(5),g(6,"async"),i()(),n(7,"div",2)(8,"mat-card",3)(9,"mat-card-content")(10,"div",4)(11,"div",5)(12,"mat-icon",6),a(13,"hotel"),i()(),n(14,"div",7)(15,"h3"),a(16,"25"),i(),n(17,"p"),a(18,"Total Rooms"),i()()()()(),n(19,"mat-card",3)(20,"mat-card-content")(21,"div",4)(22,"div",5)(23,"mat-icon",8),a(24,"event"),i()(),n(25,"div",7)(26,"h3"),a(27,"12"),i(),n(28,"p"),a(29,"Active Bookings"),i()()()()(),n(30,"mat-card",3)(31,"mat-card-content")(32,"div",4)(33,"div",5)(34,"mat-icon",9),a(35,"people"),i()(),n(36,"div",7)(37,"h3"),a(38,"8"),i(),n(39,"p"),a(40,"Total Customers"),i()()()()(),n(41,"mat-card",3)(42,"mat-card-content")(43,"div",4)(44,"div",5)(45,"mat-icon",10),a(46,"attach_money"),i()(),n(47,"div",7)(48,"h3"),a(49,"$15,420"),i(),n(50,"p"),a(51,"Revenue"),i()()()()()(),n(52,"div",11)(53,"h2"),a(54,"Quick Actions"),i(),n(55,"div",12)(56,"button",13)(57,"mat-icon"),a(58,"hotel"),i(),a(59," Manage Rooms "),i(),n(60,"button",14)(61,"mat-icon"),a(62,"event"),i(),a(63," View Reservations "),i(),n(64,"button",15)(65,"mat-icon"),a(66,"people"),i(),a(67," Manage Customers "),i()()(),n(68,"div",16)(69,"h2"),a(70,"All Bookings"),i(),p(71,xt,2,0,"div",17)(72,ht,2,0,"div",18)(73,Rt,28,3,"div",19),i(),n(74,"div",20)(75,"h2"),a(76,"All Complaints"),i(),p(77,Lt,2,0,"div",17)(78,Nt,2,0,"div",18)(79,ne,25,3,"div",19),i()()),_&2){let u;m(5),E("Welcome back, ",(u=C(6,7,r.user$))==null?null:u.firstName,"!"),m(66),l("ngIf",r.isLoadingBookings),m(),l("ngIf",!r.isLoadingBookings&&r.bookings.length===0),m(),l("ngIf",!r.isLoadingBookings&&r.bookings.length>0),m(4),l("ngIf",r.isLoadingComplaints),m(),l("ngIf",!r.isLoadingComplaints&&r.complaints.length===0),m(),l("ngIf",!r.isLoadingComplaints&&r.complaints.length>0)}},dependencies:[L,I,w,B,R,$,z,H,N,J,Q,W,V,U,G,q,ct,it,at,rt,ot,nt,pt,mt,dt,lt,st,et,tt,Z,Y,X],styles:[".admin-dashboard-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:32px;font-weight:500}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{padding:24px}.stat-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.stat-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:28px;font-weight:500}.stat-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.quick-actions[_ngcontent-%COMP%]{margin-top:32px}.quick-actions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 16px;font-size:24px;font-weight:400}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.actions-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;height:auto}@media (max-width: 768px){.admin-dashboard-container[_ngcontent-%COMP%]{padding:16px}.stats-grid[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.complaints-section[_ngcontent-%COMP%]{margin-top:32px}.table-wrapper[_ngcontent-%COMP%]{overflow:auto}table[_ngcontent-%COMP%]{width:100%}.loading[_ngcontent-%COMP%]{padding:24px 0;display:flex;justify-content:center}.empty-state[_ngcontent-%COMP%]{color:#666;padding:16px 0}.chip.priority.low[_ngcontent-%COMP%]{background:#f1f8e9;color:#558b2f;padding:2px 8px;border-radius:12px;font-size:12px}.chip.priority.medium[_ngcontent-%COMP%]{background:#fff8e1;color:#f9a825;padding:2px 8px;border-radius:12px;font-size:12px}.chip.priority.high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:2px 8px;border-radius:12px;font-size:12px}.chip.priority.urgent[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:2px 8px;border-radius:12px;font-size:12px;border:1px solid #c62828}.status-select[_ngcontent-%COMP%]{min-width:150px}.bookings-section[_ngcontent-%COMP%]{margin-top:32px}.chip.status.pending[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00;padding:2px 8px;border-radius:12px;font-size:12px}.chip.status.confirmed[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32;padding:2px 8px;border-radius:12px;font-size:12px}.chip.status.checked_in[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0;padding:2px 8px;border-radius:12px;font-size:12px}.chip.status.checked_out[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2;padding:2px 8px;border-radius:12px;font-size:12px}.chip.status.cancelled[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:2px 8px;border-radius:12px;font-size:12px}.chip.payment.pending[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00;padding:2px 8px;border-radius:12px;font-size:12px}.chip.payment.paid[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32;padding:2px 8px;border-radius:12px;font-size:12px}.chip.payment.failed[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:2px 8px;border-radius:12px;font-size:12px}"]});let t=e;return t})();export{Ae as AdminDashboardComponent};
