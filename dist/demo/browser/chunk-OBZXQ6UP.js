import{a as me,j as le}from"./chunk-5WCYFJTU.js";import{n as $,r as N,t as j,u as q}from"./chunk-HQIV43OG.js";import{a as Me,b as xe}from"./chunk-TPLLZ4WP.js";import{C as fe,D as ge,W as he,X as _e,b as Z,d as g,f as ee,g as te,i as ie,k as ne,l as re,m as oe,o as ae,q as se,r as de,u as pe,x as ce,y as ue}from"./chunk-2CPZP6XT.js";import"./chunk-2ROMFWB2.js";import{a as Ce,b as be}from"./chunk-CGMPHUAE.js";import{Da as I,Ha as p,Q as C,Ta as s,Ua as e,Ub as L,Va as t,Wa as f,Wb as D,Xc as A,Zb as O,_a as k,ab as c,ad as R,bb as x,bc as B,bd as G,ca as b,cc as T,cd as z,da as M,dd as H,ed as U,f as E,fc as V,fd as W,gd as J,hd as K,id as Q,jd as X,kd as Y,pb as i,qb as P,rb as F,ua as m,ya as u,yb as h,zb as _}from"./chunk-ESMA6CIH.js";function ve(r,a){r&1&&(e(0,"mat-error"),i(1," Email is required "),t())}function Se(r,a){r&1&&(e(0,"mat-error"),i(1," Please enter a valid email "),t())}function we(r,a){r&1&&(e(0,"mat-error"),i(1," Password is required "),t())}function ye(r,a){r&1&&(e(0,"mat-error"),i(1," Password must be at least 6 characters "),t())}function Ee(r,a){r&1&&(e(0,"span"),i(1,"Sign In"),t())}function Ie(r,a){r&1&&f(0,"mat-spinner",16)}function ke(r,a){if(r&1){let v=k();e(0,"div",17),f(1,"mat-divider",18),e(2,"h4"),i(3,"Demo Credentials:"),t(),e(4,"div",19)(5,"strong"),i(6,"Admin:"),t(),i(7," admin@hotel.com / password123 "),e(8,"button",20),c("click",function(){b(v);let l=x();return M(l.fillDemoCredentials("admin"))}),i(9,"Fill"),t()(),e(10,"div",19)(11,"strong"),i(12,"Customer:"),t(),i(13," customer@email.com / password123 "),e(14,"button",20),c("click",function(){b(v);let l=x();return M(l.fillDemoCredentials("customer"))}),i(15,"Fill"),t()()()}}var nt=(()=>{let a=class a{constructor(o,l,n,d){this.fb=o,this.store=l,this.router=n,this.snackBar=d,this.hidePassword=!0,this.showDemoCredentials=!1,this.isLoading$=this.store.select(j),this.destroy$=new E,this.loginForm=this.fb.group({email:["",[g.required,g.email]],password:["",[g.required,g.minLength(6)]]})}ngOnInit(){this.store.dispatch(le()),this.store.select(q).pipe(C(this.destroy$)).subscribe(o=>{o&&this.snackBar.open(o,"Close",{duration:5e3})}),this.store.select(N).pipe(C(this.destroy$)).subscribe(o=>{o&&this.redirectBasedOnRole(o.role)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSubmit(){this.loginForm.valid&&this.store.dispatch(me({credentials:this.loginForm.value}))}fillDemoCredentials(o){let l={admin:{email:"admin@hotel.com",password:"password123"},customer:{email:"customer@email.com",password:"password123"}};this.loginForm.patchValue(l[o])}redirectBasedOnRole(o){switch(o){case"admin":this.router.navigate(["/admin"]);break;case"staff":this.router.navigate(["/staff"]);break;default:this.router.navigate(["/dashboard"])}}};a.\u0275fac=function(l){return new(l||a)(u(oe),u($),u(B),u(he))},a.\u0275cmp=I({type:a,selectors:[["app-login"]],decls:42,vars:18,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","Enter your email"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["diameter","20",4,"ngIf"],["class","demo-credentials",4,"ngIf"],[1,"card-footer"],["routerLink","/register"],["mat-button","","color","accent",3,"click"],["diameter","20"],[1,"demo-credentials"],[1,"mt-3","mb-2"],[1,"demo-section"],["mat-stroked-button","","size","small",1,"demo-button",3,"click"]],template:function(l,n){if(l&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Welcome Back"),t(),e(5,"mat-card-subtitle"),i(6,"Sign in to your account"),t()(),e(7,"mat-card-content")(8,"form",2),c("ngSubmit",function(){return n.onSubmit()}),e(9,"mat-form-field",3)(10,"mat-label"),i(11,"Email"),t(),f(12,"input",4),e(13,"mat-icon",5),i(14,"email"),t(),p(15,ve,2,0,"mat-error",6)(16,Se,2,0,"mat-error",6),t(),e(17,"mat-form-field",3)(18,"mat-label"),i(19,"Password"),t(),f(20,"input",7),e(21,"button",8),c("click",function(){return n.hidePassword=!n.hidePassword}),e(22,"mat-icon"),i(23),t()(),p(24,we,2,0,"mat-error",6)(25,ye,2,0,"mat-error",6),t(),e(26,"div",9)(27,"button",10),h(28,"async"),p(29,Ee,2,0,"span",6),h(30,"async"),p(31,Ie,1,0,"mat-spinner",11),h(32,"async"),t()()(),p(33,ke,16,0,"div",12),t(),e(34,"mat-card-actions")(35,"div",13)(36,"p"),i(37,"Don't have an account? "),e(38,"a",14),i(39,"Sign up here"),t()(),e(40,"button",15),c("click",function(){return n.showDemoCredentials=!n.showDemoCredentials}),i(41),t()()()()()),l&2){let d,S,w,y;m(8),s("formGroup",n.loginForm),m(7),s("ngIf",(d=n.loginForm.get("email"))==null?null:d.hasError("required")),m(),s("ngIf",(S=n.loginForm.get("email"))==null?null:S.hasError("email")),m(4),s("type",n.hidePassword?"password":"text"),m(3),P(n.hidePassword?"visibility_off":"visibility"),m(),s("ngIf",(w=n.loginForm.get("password"))==null?null:w.hasError("required")),m(),s("ngIf",(y=n.loginForm.get("password"))==null?null:y.hasError("minlength")),m(2),s("disabled",n.loginForm.invalid||_(28,12,n.isLoading$)),m(2),s("ngIf",!_(30,14,n.isLoading$)),m(2),s("ngIf",_(32,16,n.isLoading$)),m(2),s("ngIf",n.showDemoCredentials),m(8),F(" ",n.showDemoCredentials?"Hide":"Show"," Demo Credentials ")}},dependencies:[O,L,D,ae,ie,Z,ee,te,ne,re,Y,U,Q,J,X,K,W,ue,ce,se,de,pe,ge,fe,G,R,A,H,z,_e,be,Ce,xe,Me,V,T],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:24px}.form-actions[_ngcontent-%COMP%]{margin-top:16px}.card-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;text-align:center}.demo-credentials[_ngcontent-%COMP%]{background:#f5f5f5;padding:16px;border-radius:8px;margin-top:16px}.demo-credentials[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#666;font-size:14px}.demo-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:12px}.demo-button[_ngcontent-%COMP%]{min-width:50px;height:24px;line-height:24px}a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let r=a;return r})();export{nt as LoginComponent};
