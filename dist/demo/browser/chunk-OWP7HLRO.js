import{a as lt}from"./chunk-RPNWSXSJ.js";import"./chunk-HIVZESVJ.js";import"./chunk-FJOTTGA4.js";import{a as at,b as ot,o as mt}from"./chunk-6NQBMDOT.js";import"./chunk-GHULWBQP.js";import"./chunk-WFEU5DWJ.js";import"./chunk-WR3NAOOY.js";import"./chunk-GOHQ6BDO.js";import{a as X}from"./chunk-DBSPY7YH.js";import"./chunk-46DETFXS.js";import"./chunk-VZ6OGXNG.js";import"./chunk-DLOIIN3W.js";import"./chunk-TGZNMUSI.js";import{c as nt}from"./chunk-O4ARMABX.js";import{K as Z,L as tt,M as et,R as it,b as Y,d as v,f as H,g as U,j as W,l as J,m as K,o as Q}from"./chunk-OP2X5AS6.js";import"./chunk-WGAKZYIZ.js";import{a as pt}from"./chunk-BKTIJ4YH.js";import"./chunk-TWAJJYLZ.js";import{n as L,r as N}from"./chunk-SS6DKNIN.js";import{a as rt}from"./chunk-Z5A5ZMMP.js";import{$b as B,Aa as _,Bb as f,Cb as w,Db as h,Fa as I,Ka as d,Wa as c,Wb as T,Xa as e,Xb as F,Ya as t,Yb as k,Za as b,ac as D,bb as y,db as C,ea as S,eb as g,fa as M,id as V,kd as z,md as A,nd as j,od as $,pd as G,qd as q,rd as R,sb as i,tb as u,ub as x,wa as o}from"./chunk-WOJ2UDLT.js";function ct(n,r){n&1&&(e(0,"mat-error"),i(1," Description is required "),t())}function st(n,r){n&1&&(e(0,"mat-error"),i(1," Description must be at least 20 characters long "),t())}function dt(n,r){n&1&&(e(0,"mat-error"),i(1," Description cannot exceed 1000 characters "),t())}function gt(n,r){n&1&&(e(0,"span"),i(1,"Submit Complaint"),t())}function ut(n,r){n&1&&b(0,"mat-spinner",18)}function ft(n,r){n&1&&(e(0,"div",19),b(1,"app-loading-spinner",20),t())}function _t(n,r){if(n&1){let m=y();e(0,"div",21)(1,"mat-icon"),i(2,"support_agent"),t(),e(3,"h3"),i(4,"No complaints submitted"),t(),e(5,"p"),i(6,"You haven't submitted any complaints yet"),t(),e(7,"button",22),C("click",function(){S(m);let l=g();return M(l.switchToSubmitTab())}),i(8,"Submit Your First Complaint"),t()()}}function Ct(n,r){if(n&1&&(e(0,"div",37)(1,"mat-icon"),i(2,"check_circle"),t(),e(3,"div",38)(4,"strong"),i(5,"Resolved"),t(),e(6,"span"),i(7),f(8,"date"),t()()()),n&2){let m=g().$implicit;o(7),u(h(8,1,m.updatedAt,"medium"))}}function xt(n,r){if(n&1){let m=y();e(0,"mat-card-actions")(1,"button",40),C("click",function(){S(m);let l=g().$implicit,a=g(2);return M(a.editComplaint(l))}),e(2,"mat-icon"),i(3,"edit"),t(),i(4," Edit "),t(),e(5,"button",41)(6,"mat-icon"),i(7,"cancel"),t(),i(8," Cancel "),t()()}}function ht(n,r){if(n&1&&(e(0,"mat-card",25)(1,"mat-card-content")(2,"div",26)(3,"div",27)(4,"h3"),i(5),t(),e(6,"div",28)(7,"span",29),i(8),t(),e(9,"span",30),i(10),f(11,"date"),t()()(),e(12,"div",31)(13,"div",32)(14,"span",33),i(15),f(16,"titlecase"),t()()()(),e(17,"div",34)(18,"p",35),i(19),t(),e(20,"div",36)(21,"div",37)(22,"mat-icon"),i(23,"create"),t(),e(24,"div",38)(25,"strong"),i(26,"Complaint Submitted"),t(),e(27,"span"),i(28),f(29,"date"),t()()(),e(30,"div",37)(31,"mat-icon"),i(32,"update"),t(),e(33,"div",38)(34,"strong"),i(35,"Last Updated"),t(),e(36,"span"),i(37),f(38,"date"),t()()(),d(39,Ct,9,4,"div",39),t()()(),d(40,xt,9,0,"mat-card-actions",9),t()),n&2){let m=r.$implicit;o(5),x("Complaint #",m.complaintId),o(3),x("ID: ",m.complaintId),o(2),u(h(11,10,m.createdAt,"mediumDate")),o(4),c("ngClass","status-"+m.status.toLowerCase()),o(),x(" ",w(16,13,m.status)," "),o(4),u(m.description),o(9),u(h(29,15,m.createdAt,"medium")),o(9),u(h(38,18,m.updatedAt,"medium")),o(2),c("ngIf",m.status==="RESOLVED"),o(),c("ngIf",m.status==="ACTIVE")}}function bt(n,r){if(n&1&&(e(0,"div",23),d(1,ht,41,21,"mat-card",24),t()),n&2){let m=g();o(),c("ngForOf",m.complaints)}}var zt=(()=>{let r=class r{constructor(p,l,a,s){this.fb=p,this.store=l,this.complaintService=a,this.snackBar=s,this.user$=this.store.select(N),this.complaints=[],this.isLoading=!0,this.isSubmitting=!1,this.complaintForm=this.fb.group({description:["",[v.required,v.minLength(20),v.maxLength(1e3)]]})}ngOnInit(){this.loadComplaints()}loadComplaints(){this.user$.subscribe(p=>{p&&this.complaintService.getComplaintsByCustomer(p.id).subscribe({next:l=>{this.complaints=l.sort((a,s)=>new Date(s.updatedAt).getTime()-new Date(a.updatedAt).getTime()),this.isLoading=!1},error:l=>{console.error("Error loading complaints:",l),this.isLoading=!1,this.snackBar.open("Failed to load complaints. Please try again.","Close",{duration:5e3,panelClass:["error-snackbar"]})}})})}onSubmit(){this.complaintForm.valid&&(this.isSubmitting=!0,this.user$.subscribe(p=>{if(p){let l=this.complaintForm.value.description;this.complaintService.createComplaint(p.id,l).subscribe({next:a=>{this.complaints.unshift(a),this.resetForm(),this.isSubmitting=!1,this.snackBar.open("Complaint submitted successfully!","Close",{duration:5e3,panelClass:["success-snackbar"]})},error:a=>{console.error("Error submitting complaint:",a),this.isSubmitting=!1,this.snackBar.open("Failed to submit complaint. Please try again.","Close",{duration:5e3,panelClass:["error-snackbar"]})}})}}))}resetForm(){this.complaintForm.reset()}switchToSubmitTab(){console.log("Switch to submit tab")}editComplaint(p){console.log("Edit complaint:",p),this.snackBar.open("Edit functionality coming soon!","Close",{duration:3e3})}cancelComplaint(p){console.log("Cancel complaint:",p),this.snackBar.open("Cancel functionality coming soon!","Close",{duration:3e3})}};r.\u0275fac=function(l){return new(l||r)(_(Q),_(L),_(lt),_(X))},r.\u0275cmp=I({type:r,selectors:[["app-complaints"]],decls:37,vars:11,consts:[[1,"complaints-container"],[1,"page-header"],[1,"complaints-tabs"],["label","Submit Complaint"],[1,"tab-content"],[1,"complaint-form-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","description","placeholder","Please provide detailed information about your complaint...","rows","6"],[4,"ngIf"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],["label","Track Status"],["class","loading-section",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","complaints-list",4,"ngIf"],["diameter","20"],[1,"loading-section"],["message","Loading your complaints..."],[1,"empty-state"],["mat-raised-button","","color","primary",3,"click"],[1,"complaints-list"],["class","complaint-card",4,"ngFor","ngForOf"],[1,"complaint-card"],[1,"complaint-header"],[1,"complaint-info"],[1,"complaint-meta"],[1,"complaint-id"],[1,"complaint-date"],[1,"complaint-status"],[1,"status-chips"],[1,"status-chip",3,"ngClass"],[1,"complaint-details"],[1,"complaint-description"],[1,"complaint-timeline"],[1,"timeline-item"],[1,"timeline-content"],["class","timeline-item",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn","(click","cancelComplaint(complaint)"]],template:function(l,a){if(l&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Support & Complaints"),t(),e(4,"p"),i(5,"We're here to help. Submit your concerns and track their resolution."),t()(),e(6,"mat-tab-group",2)(7,"mat-tab",3)(8,"div",4)(9,"mat-card",5)(10,"mat-card-header")(11,"mat-card-title"),i(12,"Register a New Complaint"),t(),e(13,"mat-card-subtitle"),i(14,"Please provide detailed information about your concern"),t()(),e(15,"mat-card-content")(16,"form",6),C("ngSubmit",function(){return a.onSubmit()}),e(17,"mat-form-field",7)(18,"mat-label"),i(19,"Description"),t(),b(20,"textarea",8),e(21,"mat-hint"),i(22),t(),d(23,ct,2,0,"mat-error",9)(24,st,2,0,"mat-error",9)(25,dt,2,0,"mat-error",9),t(),e(26,"div",10)(27,"button",11),C("click",function(){return a.resetForm()}),i(28,"Clear Form"),t(),e(29,"button",12),d(30,gt,2,0,"span",9)(31,ut,1,0,"mat-spinner",13),t()()()()()()(),e(32,"mat-tab",14)(33,"div",4),d(34,ft,2,0,"div",15)(35,_t,9,0,"div",16)(36,bt,2,1,"div",17),t()()()()),l&2){let s,E,P,O;o(16),c("formGroup",a.complaintForm),o(6),x("",((s=a.complaintForm.get("description"))==null||s.value==null?null:s.value.length)||0,"/1000 characters"),o(),c("ngIf",(E=a.complaintForm.get("description"))==null?null:E.hasError("required")),o(),c("ngIf",(P=a.complaintForm.get("description"))==null?null:P.hasError("minlength")),o(),c("ngIf",(O=a.complaintForm.get("description"))==null?null:O.hasError("maxlength")),o(4),c("disabled",a.complaintForm.invalid||a.isSubmitting),o(),c("ngIf",!a.isSubmitting),o(),c("ngIf",a.isSubmitting),o(3),c("ngIf",a.isLoading),o(),c("ngIf",!a.isLoading&&a.complaints.length===0),o(),c("ngIf",!a.isLoading&&a.complaints.length>0)}},dependencies:[mt,T,F,k,W,Y,H,U,J,K,V,z,A,q,$,R,G,j,it,Z,et,tt,nt,rt,at,ot,B,D,pt],styles:[".complaints-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:24px}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:32px;font-weight:300;color:#333}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}.complaints-tabs[_ngcontent-%COMP%]{margin-bottom:24px}.tab-content[_ngcontent-%COMP%]{padding:24px 0}.complaint-form-card[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid #eee}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:400}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px}.complaints-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.complaint-card[_ngcontent-%COMP%]{transition:transform .2s ease}.complaint-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.complaint-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.complaint-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500;color:#333}.complaint-meta[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:12px;color:#666}.complaint-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chip[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500}.status-active[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.status-resolved[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}.complaint-description[_ngcontent-%COMP%]{color:#333;line-height:1.6;margin:0 0 16px}.complaint-timeline[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;border-left:4px solid #1976d2}.timeline-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:16px}.timeline-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.timeline-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;margin-top:2px}.timeline-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.timeline-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;font-size:14px}.timeline-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:12px}.loading-section[_ngcontent-%COMP%]{padding:40px 0}@media (max-width: 768px){.complaint-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.complaint-status[_ngcontent-%COMP%]{align-items:flex-start}.status-chips[_ngcontent-%COMP%]{flex-wrap:wrap}}"]});let n=r;return n})();export{zt as ComplaintsComponent};
