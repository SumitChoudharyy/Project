import{a as pe,j as ce}from"./chunk-RM634NEF.js";import{b as le}from"./chunk-MT5SNCPC.js";import{b as ee}from"./chunk-I5TKW2RA.js";import{c as ae,d as me}from"./chunk-GFDPKATK.js";import{L as te,M as ie,P as re,S as ne,T as oe,b as H,d as h,f as W,g as J,j as K,l as Q,m as X,p as Y,r as Z}from"./chunk-O5SXCTPO.js";import"./chunk-NYMOSDCU.js";import{n as L,r as O,t as B,u as k}from"./chunk-YXL3DSGN.js";import{a as se,b as de}from"./chunk-I2VQT6RE.js";import{Aa as u,Bb as p,Cb as c,Fa as C,Ka as d,S as v,Wa as l,Xa as e,Ya as t,Yb as S,Za as g,_b as w,cc as E,db as _,ed as T,g as b,jd as $,kc as I,kd as D,lc as P,ld as N,md as j,nd as q,oc as F,od as R,pd as A,qd as G,rd as V,sb as n,sd as z,tb as M,td as U,wa as a}from"./chunk-ONERCYX6.js";function ue(i,o){i&1&&(e(0,"mat-error"),n(1," Email is required "),t())}function ge(i,o){i&1&&(e(0,"mat-error"),n(1," Password is required "),t())}function he(i,o){i&1&&(e(0,"mat-error"),n(1," Password must be at least 6 characters "),t())}function _e(i,o){i&1&&(e(0,"span"),n(1,"Sign In"),t())}function Me(i,o){i&1&&g(0,"mat-spinner",15)}function xe(i,o){if(i&1&&(e(0,"div",16),n(1),t()),i&2){let fe=o.ngIf;a(),M(fe)}}var He=(()=>{let o=class o{constructor(m,s,r){this.fb=m,this.store=s,this.router=r,this.hidePassword=!0,this.showDemoCredentials=!1,this.isLoading$=this.store.select(B),this.error$=this.store.select(k),this.destroy$=new b,this.loginForm=this.fb.group({email:["",[h.required]],password:["",[h.required,h.minLength(6)]]})}ngOnInit(){this.store.dispatch(ce()),this.store.select(O).pipe(v(this.destroy$)).subscribe(m=>{m&&this.redirectBasedOnRole(m.role)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSubmit(){this.loginForm.valid&&this.store.dispatch(pe({credentials:this.loginForm.value}))}fillDemoCredentials(m){let s={admin:{email:"admin@hotel.com",password:"password123"},customer:{email:"customer@email.com",password:"password123"},staffBilling:{email:"staff.billing@hotel.com",password:"password123"},staffMaintenance:{email:"staff.maintenance@hotel.com",password:"password123"}};this.loginForm.patchValue(s[m])}redirectBasedOnRole(m){switch(m){case"admin":this.router.navigate(["/admin"]);break;case"staff":this.router.navigate(["/staff"]);break;default:this.router.navigate(["/dashboard"])}}};o.\u0275fac=function(s){return new(s||o)(u(Y),u(L),u(I))},o.\u0275cmp=C({type:o,selectors:[["app-login"]],decls:40,vars:18,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","text","formControlName","email","placeholder","Enter your email or username"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["diameter","20",4,"ngIf"],["class","api-error",4,"ngIf"],[1,"card-footer"],["routerLink","/register"],["diameter","20"],[1,"api-error"]],template:function(s,r){if(s&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),n(4,"Welcome Back"),t(),e(5,"mat-card-subtitle"),n(6,"Sign in to your account"),t()(),e(7,"mat-card-content")(8,"form",2),_("ngSubmit",function(){return r.onSubmit()}),e(9,"mat-form-field",3)(10,"mat-label"),n(11,"Email"),t(),g(12,"input",4),e(13,"mat-icon",5),n(14,"email"),t(),d(15,ue,2,0,"mat-error",6),t(),e(16,"mat-form-field",3)(17,"mat-label"),n(18,"Password"),t(),g(19,"input",7),e(20,"button",8),_("click",function(){return r.hidePassword=!r.hidePassword}),e(21,"mat-icon"),n(22),t()(),d(23,ge,2,0,"mat-error",6)(24,he,2,0,"mat-error",6),t(),e(25,"div",9)(26,"button",10),p(27,"async"),d(28,_e,2,0,"span",6),p(29,"async"),d(30,Me,1,0,"mat-spinner",11),p(31,"async"),t(),d(32,xe,2,1,"div",12),p(33,"async"),t()()(),e(34,"mat-card-actions")(35,"div",13)(36,"p"),n(37,"Don't have an account? "),e(38,"a",14),n(39,"Sign up here"),t()()()()()()),s&2){let f,x,y;a(8),l("formGroup",r.loginForm),a(7),l("ngIf",(f=r.loginForm.get("email"))==null?null:f.hasError("required")),a(4),l("type",r.hidePassword?"password":"text"),a(3),M(r.hidePassword?"visibility_off":"visibility"),a(),l("ngIf",(x=r.loginForm.get("password"))==null?null:x.hasError("required")),a(),l("ngIf",(y=r.loginForm.get("password"))==null?null:y.hasError("minlength")),a(2),l("disabled",r.loginForm.invalid||c(27,10,r.isLoading$)),a(2),l("ngIf",!c(29,12,r.isLoading$)),a(2),l("ngIf",c(31,14,r.isLoading$)),a(2),l("ngIf",c(33,16,r.error$))}},dependencies:[E,S,w,Z,K,H,W,J,Q,X,U,q,V,A,z,G,R,oe,ne,te,ie,re,me,ae,D,$,T,j,N,ee,de,se,le,F,P],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:24px}.form-actions[_ngcontent-%COMP%]{margin-top:16px}.card-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;text-align:center}.demo-credentials[_ngcontent-%COMP%]{background:#f5f5f5;padding:16px;border-radius:8px;margin-top:16px}.demo-credentials[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#666;font-size:14px}.demo-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:12px}.demo-button[_ngcontent-%COMP%]{min-width:50px;height:24px;line-height:24px}.api-error[_ngcontent-%COMP%]{color:#d32f2f;margin-top:8px;font-size:12px}a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let i=o;return i})();export{He as LoginComponent};
