import{a as vt}from"./chunk-NWZHLJ47.js";import{d as bt,e as St,f as k,g as yt}from"./chunk-N2TOTUWC.js";import{n as Q,r as W}from"./chunk-HQIV43OG.js";import{g as Et,h as Mt,o as Pt}from"./chunk-B2ACUTRL.js";import"./chunk-SM75V2JD.js";import"./chunk-TPLLZ4WP.js";import{a as xt,c as ht}from"./chunk-HZLVDOW6.js";import"./chunk-3Z7NIQRX.js";import{C as ft,W as _t,b as ot,d as f,f as at,g as rt,i as lt,k as mt,l as pt,m as ct,q as st,r as dt,s as gt,x as ut}from"./chunk-2CPZP6XT.js";import"./chunk-2ROMFWB2.js";import{a as Ct}from"./chunk-CGMPHUAE.js";import{Ab as y,C,Da as $,Ha as d,Sb as R,Ta as c,Tb as G,Ua as e,Ub as H,Va as t,W as z,Wa as x,Xb as U,Yb as Y,Z as j,_a as T,a as E,ab as h,ad as J,b as M,bb as g,ca as P,cd as K,da as O,ed as X,fd as Z,gd as tt,hd as et,id as it,jd as nt,m as v,n as q,pb as i,qb as u,rb as S,ua as a,ya as b,yb as _,zb as I}from"./chunk-ESMA6CIH.js";var Ot=(()=>{let r=class r{constructor(m){this.mockData=m}createComplaint(m,l){let s={id:(this.mockData.getComplaints().length+1).toString(),customerId:m,title:l.title||"",description:l.description||"",category:l.category||bt.OTHER,priority:l.priority||St.MEDIUM,status:k.OPEN,bookingId:l.bookingId,createdAt:new Date,updatedAt:new Date,attachments:l.attachments||[]};return this.mockData.addComplaint(s),v(s).pipe(C(1e3))}getComplaintsByCustomer(m){let l=this.mockData.getComplaints().filter(o=>o.customerId===m);return v(l).pipe(C(500))}getAllComplaints(){let m=this.mockData.getComplaints();return v(m).pipe(C(500))}updateComplaint(m,l){let o=this.mockData.updateComplaint(m,M(E({},l),{updatedAt:new Date}));return o?v(o).pipe(C(500)):q(()=>"Complaint not found").pipe(C(500))}assignComplaint(m,l){return this.updateComplaint(m,{assignedStaffId:l,status:k.IN_PROGRESS})}resolveComplaint(m,l){return this.updateComplaint(m,{status:k.RESOLVED,resolution:l,resolvedAt:new Date})}};r.\u0275fac=function(l){return new(l||r)(j(yt))},r.\u0275prov=z({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();function wt(n,r){n&1&&(e(0,"mat-error"),i(1," Please select a category "),t())}function Tt(n,r){n&1&&(e(0,"mat-error"),i(1," Please select priority level "),t())}function Ft(n,r){n&1&&(e(0,"mat-error"),i(1," Title is required "),t())}function Dt(n,r){n&1&&(e(0,"mat-error"),i(1," Title must be at least 5 characters long "),t())}function Bt(n,r){n&1&&(e(0,"mat-error"),i(1," Title cannot exceed 100 characters "),t())}function Nt(n,r){n&1&&(e(0,"mat-error"),i(1," Description is required "),t())}function At(n,r){n&1&&(e(0,"mat-error"),i(1," Description must be at least 20 characters long "),t())}function Lt(n,r){n&1&&(e(0,"mat-error"),i(1," Description cannot exceed 1000 characters "),t())}function Vt(n,r){n&1&&(e(0,"span"),i(1,"Submit Complaint"),t())}function qt(n,r){n&1&&x(0,"mat-spinner",34)}function zt(n,r){n&1&&(e(0,"div",35),x(1,"app-loading-spinner",36),t())}function jt(n,r){if(n&1){let p=T();e(0,"div",37)(1,"mat-icon"),i(2,"support_agent"),t(),e(3,"h3"),i(4,"No complaints submitted"),t(),e(5,"p"),i(6,"You haven't submitted any complaints yet"),t(),e(7,"button",38),h("click",function(){P(p);let l=g();return O(l.switchToSubmitTab())}),i(8,"Submit Your First Complaint"),t()()}}function $t(n,r){if(n&1&&(e(0,"div",56)(1,"mat-icon"),i(2,"assignment_ind"),t(),e(3,"div",57)(4,"strong"),i(5,"Assigned to Staff"),t(),e(6,"span"),i(7),_(8,"date"),t()()()),n&2){let p=g(2).$implicit;a(7),u(y(8,1,p.updatedAt,"medium"))}}function Rt(n,r){if(n&1&&(e(0,"div",56)(1,"mat-icon"),i(2,"check_circle"),t(),e(3,"div",57)(4,"strong"),i(5,"Resolved"),t(),e(6,"span"),i(7),_(8,"date"),t(),e(9,"p",59),i(10),t()()()),n&2){let p=g(2).$implicit;a(7),u(y(8,2,p.resolvedAt,"medium")),a(3),u(p.resolution)}}function Gt(n,r){if(n&1&&(e(0,"div",55)(1,"div",56)(2,"mat-icon"),i(3,"create"),t(),e(4,"div",57)(5,"strong"),i(6,"Complaint Submitted"),t(),e(7,"span"),i(8),_(9,"date"),t()()(),d(10,$t,9,4,"div",58)(11,Rt,11,5,"div",58),t()),n&2){let p=g().$implicit;a(8),u(y(9,3,p.createdAt,"medium")),a(2),c("ngIf",p.assignedStaffId),a(),c("ngIf",p.status==="resolved"&&p.resolution)}}function Ht(n,r){if(n&1){let p=T();e(0,"mat-card-actions")(1,"button",60),h("click",function(){P(p);let l=g().$implicit,o=g(2);return O(o.editComplaint(l))}),e(2,"mat-icon"),i(3,"edit"),t(),i(4," Edit "),t(),e(5,"button",61),h("click",function(){P(p);let l=g().$implicit,o=g(2);return O(o.cancelComplaint(l))}),e(6,"mat-icon"),i(7,"cancel"),t(),i(8," Cancel "),t()()}}function Ut(n,r){if(n&1&&(e(0,"mat-card",41)(1,"mat-card-content")(2,"div",42)(3,"div",43)(4,"h3"),i(5),t(),e(6,"div",44)(7,"span",45),i(8),t(),e(9,"span",46),i(10),_(11,"date"),t()()(),e(12,"div",47)(13,"div",48)(14,"span",49),i(15),_(16,"titlecase"),t(),e(17,"span",50),i(18),_(19,"titlecase"),t()(),e(20,"span",51),i(21),_(22,"titlecase"),t()()(),e(23,"div",52)(24,"p",53),i(25),t(),d(26,Gt,12,6,"div",54),t()(),d(27,Ht,9,0,"mat-card-actions",16),t()),n&2){let p=r.$implicit;a(5),u(p.title),a(3),S("ID: ",p.id),a(2),u(y(11,11,p.createdAt,"mediumDate")),a(4),c("ngClass","status-"+p.status),a(),S(" ",I(16,14,p.status)," "),a(2),c("ngClass","priority-"+p.priority),a(),S(" ",I(19,16,p.priority)," "),a(3),u(I(22,18,p.category)),a(4),u(p.description),a(),c("ngIf",p.status!=="open"),a(),c("ngIf",p.status==="open")}}function Yt(n,r){if(n&1&&(e(0,"div",39),d(1,Ut,28,20,"mat-card",40),t()),n&2){let p=g();a(),c("ngForOf",p.complaints)}}var ue=(()=>{let r=class r{constructor(m,l,o,s){this.fb=m,this.store=l,this.complaintService=o,this.snackBar=s,this.user$=this.store.select(W),this.complaints=[],this.isLoading=!0,this.isSubmitting=!1,this.complaintForm=this.fb.group({category:["",f.required],priority:["medium",f.required],title:["",[f.required,f.minLength(5),f.maxLength(100)]],description:["",[f.required,f.minLength(20),f.maxLength(1e3)]],bookingId:[""]})}ngOnInit(){this.loadComplaints()}loadComplaints(){this.user$.subscribe(m=>{m&&this.complaintService.getComplaintsByCustomer(m.id).subscribe(l=>{this.complaints=l.sort((o,s)=>new Date(s.createdAt).getTime()-new Date(o.createdAt).getTime()),this.isLoading=!1})})}onSubmit(){this.complaintForm.valid&&(this.isSubmitting=!0,this.user$.subscribe(m=>{if(m){let l=M(E({},this.complaintForm.value),{category:this.complaintForm.value.category,priority:this.complaintForm.value.priority});this.complaintService.createComplaint(m.id,l).subscribe({next:o=>{this.complaints.unshift(o),this.resetForm(),this.isSubmitting=!1,this.snackBar.open("Complaint submitted successfully!","Close",{duration:5e3,panelClass:["success-snackbar"]})},error:o=>{console.error("Error submitting complaint:",o),this.isSubmitting=!1,this.snackBar.open("Failed to submit complaint. Please try again.","Close",{duration:5e3,panelClass:["error-snackbar"]})}})}}))}resetForm(){this.complaintForm.reset({priority:"medium"})}switchToSubmitTab(){console.log("Switch to submit tab")}editComplaint(m){console.log("Edit complaint:",m),this.snackBar.open("Edit functionality coming soon!","Close",{duration:3e3})}cancelComplaint(m){console.log("Cancel complaint:",m),this.snackBar.open("Cancel functionality coming soon!","Close",{duration:3e3})}};r.\u0275fac=function(l){return new(l||r)(b(ct),b(Q),b(Ot),b(_t))},r.\u0275cmp=$({type:r,selectors:[["app-complaints"]],decls:81,vars:16,consts:[[1,"complaints-container"],[1,"page-header"],[1,"complaints-tabs"],["label","Submit Complaint"],[1,"tab-content"],[1,"complaint-form-card"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"half-width"],["formControlName","category"],["value","room"],["value","service"],["value","billing"],["value","amenities"],["value","staff"],["value","other"],[4,"ngIf"],["formControlName","priority"],["value","low"],["value","medium"],["value","high"],["value","urgent"],["appearance","outline",1,"full-width"],["matInput","","formControlName","title","placeholder","Brief description of the issue"],["matInput","","formControlName","description","placeholder","Please provide detailed information about your complaint...","rows","6"],["matInput","","formControlName","bookingId","placeholder","Enter booking ID if applicable"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],["label","Track Status"],["class","loading-section",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","complaints-list",4,"ngIf"],["diameter","20"],[1,"loading-section"],["message","Loading your complaints..."],[1,"empty-state"],["mat-raised-button","","color","primary",3,"click"],[1,"complaints-list"],["class","complaint-card",4,"ngFor","ngForOf"],[1,"complaint-card"],[1,"complaint-header"],[1,"complaint-info"],[1,"complaint-meta"],[1,"complaint-id"],[1,"complaint-date"],[1,"complaint-status"],[1,"status-chips"],[1,"status-chip",3,"ngClass"],[1,"priority-chip",3,"ngClass"],[1,"category-chip"],[1,"complaint-details"],[1,"complaint-description"],["class","complaint-timeline",4,"ngIf"],[1,"complaint-timeline"],[1,"timeline-item"],[1,"timeline-content"],["class","timeline-item",4,"ngIf"],[1,"resolution-text"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(l,o){if(l&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Support & Complaints"),t(),e(4,"p"),i(5,"We're here to help. Submit your concerns and track their resolution."),t()(),e(6,"mat-tab-group",2)(7,"mat-tab",3)(8,"div",4)(9,"mat-card",5)(10,"mat-card-header")(11,"mat-card-title"),i(12,"Register a New Complaint"),t(),e(13,"mat-card-subtitle"),i(14,"Please provide detailed information about your concern"),t()(),e(15,"mat-card-content")(16,"form",6),h("ngSubmit",function(){return o.onSubmit()}),e(17,"div",7)(18,"mat-form-field",8)(19,"mat-label"),i(20,"Category"),t(),e(21,"mat-select",9)(22,"mat-option",10),i(23,"Room Issues"),t(),e(24,"mat-option",11),i(25,"Service Quality"),t(),e(26,"mat-option",12),i(27,"Billing & Payment"),t(),e(28,"mat-option",13),i(29,"Amenities"),t(),e(30,"mat-option",14),i(31,"Staff Behavior"),t(),e(32,"mat-option",15),i(33,"Other"),t()(),d(34,wt,2,0,"mat-error",16),t(),e(35,"mat-form-field",8)(36,"mat-label"),i(37,"Priority"),t(),e(38,"mat-select",17)(39,"mat-option",18),i(40,"Low"),t(),e(41,"mat-option",19),i(42,"Medium"),t(),e(43,"mat-option",20),i(44,"High"),t(),e(45,"mat-option",21),i(46,"Urgent"),t()(),d(47,Tt,2,0,"mat-error",16),t()(),e(48,"mat-form-field",22)(49,"mat-label"),i(50,"Title"),t(),x(51,"input",23),d(52,Ft,2,0,"mat-error",16)(53,Dt,2,0,"mat-error",16)(54,Bt,2,0,"mat-error",16),t(),e(55,"mat-form-field",22)(56,"mat-label"),i(57,"Description"),t(),x(58,"textarea",24),e(59,"mat-hint"),i(60),t(),d(61,Nt,2,0,"mat-error",16)(62,At,2,0,"mat-error",16)(63,Lt,2,0,"mat-error",16),t(),e(64,"mat-form-field",22)(65,"mat-label"),i(66,"Related Booking ID (Optional)"),t(),x(67,"input",25),e(68,"mat-hint"),i(69,"Leave empty if not related to a specific booking"),t()(),e(70,"div",26)(71,"button",27),h("click",function(){return o.resetForm()}),i(72,"Clear Form"),t(),e(73,"button",28),d(74,Vt,2,0,"span",16)(75,qt,1,0,"mat-spinner",29),t()()()()()()(),e(76,"mat-tab",30)(77,"div",4),d(78,zt,2,0,"div",31)(79,jt,9,0,"div",32)(80,Yt,2,1,"div",33),t()()()()),l&2){let s,F,D,B,N,w,A,L,V;a(16),c("formGroup",o.complaintForm),a(18),c("ngIf",(s=o.complaintForm.get("category"))==null?null:s.hasError("required")),a(13),c("ngIf",(F=o.complaintForm.get("priority"))==null?null:F.hasError("required")),a(5),c("ngIf",(D=o.complaintForm.get("title"))==null?null:D.hasError("required")),a(),c("ngIf",(B=o.complaintForm.get("title"))==null?null:B.hasError("minlength")),a(),c("ngIf",(N=o.complaintForm.get("title"))==null?null:N.hasError("maxlength")),a(6),S("",((w=o.complaintForm.get("description"))==null||w.value==null?null:w.value.length)||0,"/1000 characters"),a(),c("ngIf",(A=o.complaintForm.get("description"))==null?null:A.hasError("required")),a(),c("ngIf",(L=o.complaintForm.get("description"))==null?null:L.hasError("minlength")),a(),c("ngIf",(V=o.complaintForm.get("description"))==null?null:V.hasError("maxlength")),a(10),c("disabled",o.complaintForm.invalid||o.isSubmitting),a(),c("ngIf",!o.isSubmitting),a(),c("ngIf",o.isSubmitting),a(3),c("ngIf",o.isLoading),a(),c("ngIf",!o.isLoading&&o.complaints.length===0),a(),c("ngIf",!o.isLoading&&o.complaints.length>0)}},dependencies:[Pt,R,G,H,lt,ot,at,rt,mt,pt,J,K,X,it,tt,nt,et,Z,ut,st,gt,dt,ft,ht,xt,Ct,Et,Mt,U,Y,vt],styles:[".complaints-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:24px}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:32px;font-weight:300;color:#333}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}.complaints-tabs[_ngcontent-%COMP%]{margin-bottom:24px}.tab-content[_ngcontent-%COMP%]{padding:24px 0}.complaint-form-card[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}.half-width[_ngcontent-%COMP%]{flex:1}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid #eee}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:400}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px}.complaints-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.complaint-card[_ngcontent-%COMP%]{transition:transform .2s ease}.complaint-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.complaint-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.complaint-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500;color:#333}.complaint-meta[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:12px;color:#666}.complaint-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chip[_ngcontent-%COMP%], .priority-chip[_ngcontent-%COMP%], .category-chip[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500}.status-open[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.status-in_progress[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.status-resolved[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}.status-closed[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.priority-low[_ngcontent-%COMP%]{background-color:#f1f8e9;color:#558b2f}.priority-medium[_ngcontent-%COMP%]{background-color:#fff8e1;color:#f9a825}.priority-high[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.priority-urgent[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;border:2px solid #c62828}.category-chip[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#666}.complaint-description[_ngcontent-%COMP%]{color:#333;line-height:1.6;margin:0 0 16px}.complaint-timeline[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;border-left:4px solid #1976d2}.timeline-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:16px}.timeline-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.timeline-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;margin-top:2px}.timeline-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.timeline-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;font-size:14px}.timeline-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:12px}.resolution-text[_ngcontent-%COMP%]{color:#333;font-size:14px;margin:8px 0 0;padding:8px;background:#fff;border-radius:4px}.loading-section[_ngcontent-%COMP%]{padding:40px 0}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.complaint-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.complaint-status[_ngcontent-%COMP%]{align-items:flex-start}.status-chips[_ngcontent-%COMP%]{flex-wrap:wrap}}"]});let n=r;return n})();export{ue as ComplaintsComponent};
